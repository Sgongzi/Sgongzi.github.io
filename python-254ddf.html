<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<!-- iOS Safari -->
<meta name="apple-mobile-web-app-capable" content="yes">
<meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
<!-- Chrome, Firefox OS and Opera Status Bar Color -->
<meta name="theme-color" content="#FFFFFF">
<link rel="stylesheet" type="text/css" href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.11.1/katex.min.css">
<link rel="stylesheet" type="text/css"
  href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.19.0/themes/prism.min.css">
<link rel="stylesheet" type="text/css" href="css/SourceSansPro.css">
<link rel="stylesheet" type="text/css" href="css/theme.css">
<link rel="stylesheet" type="text/css" href="css/notablog.css">
<!-- Favicon -->

  <link rel="shortcut icon" href="data:image/svg+xml,&lt;svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 100 100%22&gt;&lt;text text-anchor=%22middle%22 dominant-baseline=%22middle%22 x=%2250%22 y=%2255%22 font-size=%2280%22&gt;📚&lt;/text&gt;&lt;/svg&gt;">

<style>
  :root {
    font-size: 20px;
  }
</style>
  <title>python程序设计&nbsp;|&nbsp;ᐕ)⁾⁾ DoubleTree</title>
  <meta property="og:type" content="blog">
  <meta property="og:title" content="python程序设计">
  
  
  <style>
    .DateTagBar {
      margin-top: 1.0rem;
    }
  </style>
</head>

<body>
  <nav class="Navbar">
  <a href="index.html">
    <div class="Navbar__Btn">
      
        <span><img class="inline-img-icon" src="data:image/svg+xml,&lt;svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 100 100%22&gt;&lt;text text-anchor=%22middle%22 dominant-baseline=%22middle%22 x=%2250%22 y=%2255%22 font-size=%2280%22&gt;📚&lt;/text&gt;&lt;/svg&gt;"></span>&nbsp;
      
      <span>Home</span>
    </div>
  </a>
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
</nav>
  <header class="Header">
    
      <div class="Header__Cover">
        <img src="https://www.notion.so/images/page-cover/met_william_morris_1877_willow.jpg">
      </div>
    
    <div class="Header__Spacer ">
    </div>
    
    <h1 class="Header__Title">python程序设计</h1>
    
      <div class="DateTagBar">
        
        
          <span class="DateTagBar__Item DateTagBar__Tag DateTagBar__Tag--gray">
            <a href="tag/CS.html">CS</a>
          </span>
        
      </div>
    
  </header>
  <article id="https://www.notion.so/254ddfbd8c03421abfb39e759fc5c8f3" class="PageRoot"><div id="https://www.notion.so/a4b76e0b56b64915b05be14a1cd33218" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"><span class="SemanticString">容器序列
list、tuple和collections.deque这些序列能存放不同类型的数据。
扁平序列
str、bytes、bytearray、memoryview和array.array，这类序列只能容纳一种类型。容器序列存放的是它们所包含的任意类型的对象的引用，而扁平序列里存放的是值而不是引用。换句话说，扁平序列其实是一段连续的内存空间。由此可见扁平序列其实更加紧凑，但是它里面只能存放诸如字符、字节和数值这种基础类型</span></span></p></div><div id="https://www.notion.so/6675f35529c347caa72a593401908e77" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"></span></p></div><div id="https://www.notion.so/40795c35ddf847d1ad871f72f266b66d" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"></span></p></div><div id="https://www.notion.so/9cbef3e184b044b5b036ce7753142fcf" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"><span class="SemanticString">在 Python 中，ABC（Abstract Base Classes，抽象基类）是通过 </span><span class="SemanticString"><code class="SemanticString__Fragment SemanticString__Fragment--Code">abc</code></span><span class="SemanticString"> 模块提供的一种机制，用于定义抽象类和方法。抽象基类不能被实例化，它们的主要作用是为子类定义接口和约定。</span></span></p></div><h3 id="https://www.notion.so/031a5f11738d4a30b4e518f2cddea4df" class="ColorfulBlock ColorfulBlock--ColorDefault Heading Heading--3"><a class="Anchor" href="#https://www.notion.so/031a5f11738d4a30b4e518f2cddea4df"><svg width="16" height="16" viewBox="0 0 16 16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a><span class="SemanticStringArray"><span class="SemanticString">ABC 概念</span></span></h3><ol class="NumberedListWrapper"><li id="https://www.notion.so/3d18c293e45c46aca2228f1fe8ec2281" class="NumberedList" value="1"><span class="SemanticStringArray"><span class="SemanticString"><strong class="SemanticString__Fragment SemanticString__Fragment--Bold">抽象基类</strong></span><span class="SemanticString">：包含一个或多个抽象方法的类。这些方法在抽象基类中只定义了接口，而没有实现。</span></span></li><li id="https://www.notion.so/d972a61d93434e0b856249053bc5c9b2" class="NumberedList" value="2"><span class="SemanticStringArray"><span class="SemanticString"><strong class="SemanticString__Fragment SemanticString__Fragment--Bold">抽象方法</strong></span><span class="SemanticString">：没有实现的方法，必须在子类中实现。使用 </span><span class="SemanticString"><code class="SemanticString__Fragment SemanticString__Fragment--Code">abc</code></span><span class="SemanticString"> 模块中的 </span><span class="SemanticString"><code class="SemanticString__Fragment SemanticString__Fragment--Code">@abstractmethod</code></span><span class="SemanticString"> 装饰器定义。</span></span></li></ol><h3 id="https://www.notion.so/70c2d2efa3994d149dc31c4aedf697d9" class="ColorfulBlock ColorfulBlock--ColorDefault Heading Heading--3"><a class="Anchor" href="#https://www.notion.so/70c2d2efa3994d149dc31c4aedf697d9"><svg width="16" height="16" viewBox="0 0 16 16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a><span class="SemanticStringArray"><span class="SemanticString">使用 </span><span class="SemanticString"><code class="SemanticString__Fragment SemanticString__Fragment--Code">abc</code></span><span class="SemanticString"> 模块</span></span></h3><div id="https://www.notion.so/4a322c3101e64ffeaf825e6002e1af2f" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"><span class="SemanticString">以下是如何使用 </span><span class="SemanticString"><code class="SemanticString__Fragment SemanticString__Fragment--Code">abc</code></span><span class="SemanticString"> 模块定义抽象基类和抽象方法的示例：</span></span></p></div><pre id="https://www.notion.so/2d76f17502954b0896c2252432269665" class="Code"><code><span class="SemanticStringArray"><span class="SemanticString"><span><span class="token keyword">from</span> abc <span class="token keyword">import</span> ABC<span class="token punctuation">,</span> abstractmethod

<span class="token keyword">class</span> <span class="token class-name">Animal</span><span class="token punctuation">(</span>ABC<span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token decorator annotation punctuation">@abstractmethod</span>
    <span class="token keyword">def</span> <span class="token function">make_sound</span><span class="token punctuation">(</span>self<span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token keyword">pass</span>

    <span class="token decorator annotation punctuation">@abstractmethod</span>
    <span class="token keyword">def</span> <span class="token function">move</span><span class="token punctuation">(</span>self<span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token keyword">pass</span>

<span class="token keyword">class</span> <span class="token class-name">Dog</span><span class="token punctuation">(</span>Animal<span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token keyword">def</span> <span class="token function">make_sound</span><span class="token punctuation">(</span>self<span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token keyword">return</span> <span class="token string">"Bark"</span>

    <span class="token keyword">def</span> <span class="token function">move</span><span class="token punctuation">(</span>self<span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token keyword">return</span> <span class="token string">"Run"</span>

<span class="token keyword">class</span> <span class="token class-name">Bird</span><span class="token punctuation">(</span>Animal<span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token keyword">def</span> <span class="token function">make_sound</span><span class="token punctuation">(</span>self<span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token keyword">return</span> <span class="token string">"Chirp"</span>

    <span class="token keyword">def</span> <span class="token function">move</span><span class="token punctuation">(</span>self<span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token keyword">return</span> <span class="token string">"Fly"</span>

<span class="token comment"># 实例化子类</span>
dog <span class="token operator">=</span> Dog<span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token keyword">print</span><span class="token punctuation">(</span>dog<span class="token punctuation">.</span>make_sound<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>  <span class="token comment"># 输出: Bark</span>
<span class="token keyword">print</span><span class="token punctuation">(</span>dog<span class="token punctuation">.</span>move<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>        <span class="token comment"># 输出: Run</span>

bird <span class="token operator">=</span> Bird<span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token keyword">print</span><span class="token punctuation">(</span>bird<span class="token punctuation">.</span>make_sound<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment"># 输出: Chirp</span>
<span class="token keyword">print</span><span class="token punctuation">(</span>bird<span class="token punctuation">.</span>move<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>       <span class="token comment"># 输出: Fly</span>

<span class="token comment"># 试图实例化抽象基类会报错</span>
<span class="token keyword">try</span><span class="token punctuation">:</span>
    animal <span class="token operator">=</span> Animal<span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token keyword">except</span> TypeError <span class="token keyword">as</span> e<span class="token punctuation">:</span>
    <span class="token keyword">print</span><span class="token punctuation">(</span>e<span class="token punctuation">)</span>  <span class="token comment"># Cannot instantiate abstract class Animal with abstract methods make_sound, move</span>
</span></span></span></code></pre><h3 id="https://www.notion.so/336d672382144d8fa74b57fe8d762a75" class="ColorfulBlock ColorfulBlock--ColorDefault Heading Heading--3"><a class="Anchor" href="#https://www.notion.so/336d672382144d8fa74b57fe8d762a75"><svg width="16" height="16" viewBox="0 0 16 16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a><span class="SemanticStringArray"><span class="SemanticString">关键点</span></span></h3><ol class="NumberedListWrapper"><li id="https://www.notion.so/8f9cd44f3a04405aa0f00854baba9fe6" class="NumberedList" value="1"><span class="SemanticStringArray"><span class="SemanticString"><strong class="SemanticString__Fragment SemanticString__Fragment--Bold">继承自 </strong></span><span class="SemanticString"><code class="SemanticString__Fragment SemanticString__Fragment--Code"><strong class="SemanticString__Fragment SemanticString__Fragment--Bold">ABC</strong></code></span><span class="SemanticString">：抽象基类需要继承自 </span><span class="SemanticString"><code class="SemanticString__Fragment SemanticString__Fragment--Code">ABC</code></span><span class="SemanticString">。</span></span></li><li id="https://www.notion.so/5bd331a8f01948c2960c762187120536" class="NumberedList" value="2"><span class="SemanticStringArray"><span class="SemanticString"><code class="SemanticString__Fragment SemanticString__Fragment--Code"><strong class="SemanticString__Fragment SemanticString__Fragment--Bold">@abstractmethod</strong></code></span><span class="SemanticString"><strong class="SemanticString__Fragment SemanticString__Fragment--Bold"> 装饰器</strong></span><span class="SemanticString">：用来标记方法为抽象方法，子类必须实现这些方法。</span></span></li><li id="https://www.notion.so/f551a9724f8a473cadf63ea995b11fe3" class="NumberedList" value="3"><span class="SemanticStringArray"><span class="SemanticString"><strong class="SemanticString__Fragment SemanticString__Fragment--Bold">不能实例化</strong></span><span class="SemanticString">：抽象基类不能被实例化，如果试图实例化，会引发 </span><span class="SemanticString"><code class="SemanticString__Fragment SemanticString__Fragment--Code">TypeError</code></span><span class="SemanticString">。</span></span></li></ol><h3 id="https://www.notion.so/b2b149e71285484fbb8af824431bc661" class="ColorfulBlock ColorfulBlock--ColorDefault Heading Heading--3"><a class="Anchor" href="#https://www.notion.so/b2b149e71285484fbb8af824431bc661"><svg width="16" height="16" viewBox="0 0 16 16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a><span class="SemanticStringArray"><span class="SemanticString">好处</span></span></h3><ul class="BulletedListWrapper"><li id="https://www.notion.so/d300db80f1d84e748e5e56c2b5bc59d9" class="BulletedList"><span class="SemanticStringArray"><span class="SemanticString"><strong class="SemanticString__Fragment SemanticString__Fragment--Bold">强制接口实现</strong></span><span class="SemanticString">：确保子类实现抽象基类中定义的所有抽象方法。</span></span></li><li id="https://www.notion.so/dc18767047e54767b89407402a39920e" class="BulletedList"><span class="SemanticStringArray"><span class="SemanticString"><strong class="SemanticString__Fragment SemanticString__Fragment--Bold">设计一致性</strong></span><span class="SemanticString">：为一组相关的类提供一致的接口。</span></span></li><li id="https://www.notion.so/af99ec7ca7dd433aab3798607e451237" class="BulletedList"><span class="SemanticStringArray"><span class="SemanticString"><strong class="SemanticString__Fragment SemanticString__Fragment--Bold">文档和约定</strong></span><span class="SemanticString">：通过抽象基类，明确子类需要实现哪些方法，提升代码可读性和维护性。</span></span></li></ul><h3 id="https://www.notion.so/3c60777f5ba04a489cdf0aa9fd498456" class="ColorfulBlock ColorfulBlock--ColorDefault Heading Heading--3"><a class="Anchor" href="#https://www.notion.so/3c60777f5ba04a489cdf0aa9fd498456"><svg width="16" height="16" viewBox="0 0 16 16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a><span class="SemanticStringArray"><span class="SemanticString">例子：定义文件系统接口</span></span></h3><pre id="https://www.notion.so/b9130ded068f4ceab6e7c3131625a34e" class="Code"><code><span class="SemanticStringArray"><span class="SemanticString"><span><span class="token keyword">from</span> abc <span class="token keyword">import</span> ABC<span class="token punctuation">,</span> abstractmethod

<span class="token keyword">class</span> <span class="token class-name">FileSystem</span><span class="token punctuation">(</span>ABC<span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token decorator annotation punctuation">@abstractmethod</span>
    <span class="token keyword">def</span> <span class="token function">read</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> path<span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token keyword">pass</span>

    <span class="token decorator annotation punctuation">@abstractmethod</span>
    <span class="token keyword">def</span> <span class="token function">write</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> path<span class="token punctuation">,</span> data<span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token keyword">pass</span>

<span class="token keyword">class</span> <span class="token class-name">LocalFileSystem</span><span class="token punctuation">(</span>FileSystem<span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token keyword">def</span> <span class="token function">read</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> path<span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token keyword">with</span> <span class="token builtin">open</span><span class="token punctuation">(</span>path<span class="token punctuation">,</span> <span class="token string">'r'</span><span class="token punctuation">)</span> <span class="token keyword">as</span> <span class="token builtin">file</span><span class="token punctuation">:</span>
            <span class="token keyword">return</span> <span class="token builtin">file</span><span class="token punctuation">.</span>read<span class="token punctuation">(</span><span class="token punctuation">)</span>

    <span class="token keyword">def</span> <span class="token function">write</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> path<span class="token punctuation">,</span> data<span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token keyword">with</span> <span class="token builtin">open</span><span class="token punctuation">(</span>path<span class="token punctuation">,</span> <span class="token string">'w'</span><span class="token punctuation">)</span> <span class="token keyword">as</span> <span class="token builtin">file</span><span class="token punctuation">:</span>
            <span class="token builtin">file</span><span class="token punctuation">.</span>write<span class="token punctuation">(</span>data<span class="token punctuation">)</span>

<span class="token keyword">class</span> <span class="token class-name">MockFileSystem</span><span class="token punctuation">(</span>FileSystem<span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token keyword">def</span> <span class="token function">__init__</span><span class="token punctuation">(</span>self<span class="token punctuation">)</span><span class="token punctuation">:</span>
        self<span class="token punctuation">.</span>storage <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>

    <span class="token keyword">def</span> <span class="token function">read</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> path<span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token keyword">return</span> self<span class="token punctuation">.</span>storage<span class="token punctuation">.</span>get<span class="token punctuation">(</span>path<span class="token punctuation">,</span> <span class="token string">""</span><span class="token punctuation">)</span>

    <span class="token keyword">def</span> <span class="token function">write</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> path<span class="token punctuation">,</span> data<span class="token punctuation">)</span><span class="token punctuation">:</span>
        self<span class="token punctuation">.</span>storage<span class="token punctuation">[</span>path<span class="token punctuation">]</span> <span class="token operator">=</span> data

<span class="token comment"># 使用示例</span>
local_fs <span class="token operator">=</span> LocalFileSystem<span class="token punctuation">(</span><span class="token punctuation">)</span>
local_fs<span class="token punctuation">.</span>write<span class="token punctuation">(</span><span class="token string">'example.txt'</span><span class="token punctuation">,</span> <span class="token string">'Hello World'</span><span class="token punctuation">)</span>
<span class="token keyword">print</span><span class="token punctuation">(</span>local_fs<span class="token punctuation">.</span>read<span class="token punctuation">(</span><span class="token string">'example.txt'</span><span class="token punctuation">)</span><span class="token punctuation">)</span>  <span class="token comment"># 输出: Hello World</span>

mock_fs <span class="token operator">=</span> MockFileSystem<span class="token punctuation">(</span><span class="token punctuation">)</span>
mock_fs<span class="token punctuation">.</span>write<span class="token punctuation">(</span><span class="token string">'example.txt'</span><span class="token punctuation">,</span> <span class="token string">'Hello World'</span><span class="token punctuation">)</span>
<span class="token keyword">print</span><span class="token punctuation">(</span>mock_fs<span class="token punctuation">.</span>read<span class="token punctuation">(</span><span class="token string">'example.txt'</span><span class="token punctuation">)</span><span class="token punctuation">)</span>  <span class="token comment"># 输出: Hello World</span>
</span></span></span></code></pre><div id="https://www.notion.so/f640dfe7743241859e21fb0a566aff5d" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"><span class="SemanticString">通过这种方式，你可以定义抽象基类来规范化不同类型文件系统的行为，使得具体实现（如本地文件系统、内存文件系统）遵循相同的接口。</span></span></p></div><h2 id="https://www.notion.so/f5ba1bae15eb41adb8395339fe7d74c7" class="ColorfulBlock ColorfulBlock--ColorDefault Heading Heading--2"><a class="Anchor" href="#https://www.notion.so/f5ba1bae15eb41adb8395339fe7d74c7"><svg width="16" height="16" viewBox="0 0 16 16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a><span class="SemanticStringArray"><span class="SemanticString">9.面向对象</span></span></h2><div id="https://www.notion.so/4fddfa45648a4e2495d554d59ea7386d" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"></span></p></div><h3 id="https://www.notion.so/683ced2737db4a5b99801a0bd971e0e6" class="ColorfulBlock ColorfulBlock--ColorDefault Heading Heading--3"><a class="Anchor" href="#https://www.notion.so/683ced2737db4a5b99801a0bd971e0e6"><svg width="16" height="16" viewBox="0 0 16 16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a><span class="SemanticStringArray"><span class="SemanticString">9.1</span></span></h3><div id="https://www.notion.so/b7ce151f919841eaac440cd85722c491" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"><span class="SemanticString">当实现了</span><span class="SemanticString"><code class="SemanticString__Fragment SemanticString__Fragment--Code">__repr__</code></span><span class="SemanticString">、</span><span class="SemanticString"><code class="SemanticString__Fragment SemanticString__Fragment--Code">__str__</code></span><span class="SemanticString">和</span><span class="SemanticString"><code class="SemanticString__Fragment SemanticString__Fragment--Code">__format__</code></span><span class="SemanticString">这三个方法时，它们之间的主要区别在于它们被调用的时机和使用场景，以及它们返回的字符串形式的不同。</span></span></p></div><ol class="NumberedListWrapper"><li id="https://www.notion.so/a8c611f2d6a14a308b3f3700d0f7927d" class="NumberedList" value="1"><span class="SemanticStringArray"><span class="SemanticString"><code class="SemanticString__Fragment SemanticString__Fragment--Code">__repr__</code></span><span class="SemanticString">:</span></span><ul class="BulletedListWrapper"><li id="https://www.notion.so/edb0f08c42b44e5c8de8383da0e0812d" class="BulletedList"><span class="SemanticStringArray"><span class="SemanticString">被调用时机：当使用</span><span class="SemanticString"><code class="SemanticString__Fragment SemanticString__Fragment--Code">repr()</code></span><span class="SemanticString">函数或者在交互式环境中输入对象时被调用。</span></span></li><li id="https://www.notion.so/74da286ce9f44883bb7f88cb5cc8dbd6" class="BulletedList"><span class="SemanticStringArray"><span class="SemanticString">使用场景：主要用于开发者，目的是提供对象的详细、准确的表示，方便开发者理解对象的内部结构和状态。</span></span></li><li id="https://www.notion.so/e9709a774134495cadac3050bd1316e3" class="BulletedList"><span class="SemanticStringArray"><span class="SemanticString">例子：</span></span></li></ul></li></ol><pre id="https://www.notion.so/32d3afdbdf124b8996f348bff46d092e" class="Code"><code><span class="SemanticStringArray"><span class="SemanticString"><span><span class="token keyword">class</span> <span class="token class-name">MyClass</span><span class="token punctuation">:</span>
    <span class="token keyword">def</span> <span class="token function">__init__</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> x<span class="token punctuation">,</span> y<span class="token punctuation">)</span><span class="token punctuation">:</span>
        self<span class="token punctuation">.</span>x <span class="token operator">=</span> x
        self<span class="token punctuation">.</span>y <span class="token operator">=</span> y

    <span class="token keyword">def</span> <span class="token function">__repr__</span><span class="token punctuation">(</span>self<span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token keyword">return</span> <span class="token string-interpolation"><span class="token string">f'MyClass(x=</span><span class="token interpolation"><span class="token punctuation">{</span>self<span class="token punctuation">.</span>x<span class="token punctuation">}</span></span><span class="token string">, y=</span><span class="token interpolation"><span class="token punctuation">{</span>self<span class="token punctuation">.</span>y<span class="token punctuation">}</span></span><span class="token string">)'</span></span>

obj <span class="token operator">=</span> MyClass<span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">,</span> <span class="token number">20</span><span class="token punctuation">)</span>
<span class="token keyword">print</span><span class="token punctuation">(</span><span class="token builtin">repr</span><span class="token punctuation">(</span>obj<span class="token punctuation">)</span><span class="token punctuation">)</span>  
</span></span></span></code></pre><ol class="NumberedListWrapper"><li id="https://www.notion.so/c0cf48800db94f1895c7c3c82346062b" class="NumberedList" value="1"><span class="SemanticStringArray"><span class="SemanticString"><code class="SemanticString__Fragment SemanticString__Fragment--Code">__str__</code></span><span class="SemanticString">:</span></span><ul class="BulletedListWrapper"><li id="https://www.notion.so/d5e9f5c9ce114fa3910265d8eaa3da44" class="BulletedList"><span class="SemanticStringArray"><span class="SemanticString">被调用时机：当使用</span><span class="SemanticString"><code class="SemanticString__Fragment SemanticString__Fragment--Code">str()</code></span><span class="SemanticString">函数或者</span><span class="SemanticString"><code class="SemanticString__Fragment SemanticString__Fragment--Code">print()</code></span><span class="SemanticString">函数输出对象时被调用。</span></span></li><li id="https://www.notion.so/cbd81af362fa4eaea300b5f6a6a8cec0" class="BulletedList"><span class="SemanticStringArray"><span class="SemanticString">使用场景：主要用于用户，目的是提供对象的友好、易读的表示形式，以便于普通用户理解。</span></span></li><li id="https://www.notion.so/a0cd7754b9114981ae85d4deec37579d" class="BulletedList"><span class="SemanticStringArray"><span class="SemanticString">例子：</span></span></li></ul></li></ol><pre id="https://www.notion.so/6631898ecd2449e6a6fb61dd508390f5" class="Code"><code><span class="SemanticStringArray"><span class="SemanticString"><span><span class="token keyword">class</span> <span class="token class-name">MyClass</span><span class="token punctuation">:</span>
    <span class="token keyword">def</span> <span class="token function">__init__</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> x<span class="token punctuation">,</span> y<span class="token punctuation">)</span><span class="token punctuation">:</span>
        self<span class="token punctuation">.</span>x <span class="token operator">=</span> x
        self<span class="token punctuation">.</span>y <span class="token operator">=</span> y

    <span class="token keyword">def</span> <span class="token function">__str__</span><span class="token punctuation">(</span>self<span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token keyword">return</span> <span class="token string-interpolation"><span class="token string">f'(</span><span class="token interpolation"><span class="token punctuation">{</span>self<span class="token punctuation">.</span>x<span class="token punctuation">}</span></span><span class="token string">, </span><span class="token interpolation"><span class="token punctuation">{</span>self<span class="token punctuation">.</span>y<span class="token punctuation">}</span></span><span class="token string">)'</span></span>

obj <span class="token operator">=</span> MyClass<span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">,</span> <span class="token number">20</span><span class="token punctuation">)</span>
<span class="token keyword">print</span><span class="token punctuation">(</span><span class="token builtin">str</span><span class="token punctuation">(</span>obj<span class="token punctuation">)</span><span class="token punctuation">)</span> 
</span></span></span></code></pre><ol class="NumberedListWrapper"><li id="https://www.notion.so/c1e0c0448e084d2bb1299720a1658fab" class="NumberedList" value="1"><span class="SemanticStringArray"><span class="SemanticString"><code class="SemanticString__Fragment SemanticString__Fragment--Code">__format__</code></span><span class="SemanticString">:</span></span><ul class="BulletedListWrapper"><li id="https://www.notion.so/7f32bfe36abd4082b1c01dae14f0730f" class="BulletedList"><span class="SemanticStringArray"><span class="SemanticString">被调用时机：当使用</span><span class="SemanticString"><code class="SemanticString__Fragment SemanticString__Fragment--Code">format()</code></span><span class="SemanticString">函数或者字符串的</span><span class="SemanticString"><code class="SemanticString__Fragment SemanticString__Fragment--Code">format()</code></span><span class="SemanticString">方法时，以及在使用格式化字符串时被调用。</span></span></li><li id="https://www.notion.so/49f6876eb42f40898110388c9b62cbba" class="BulletedList"><span class="SemanticStringArray"><span class="SemanticString">使用场景：用于自定义对象的格式化输出方式，提供更多灵活性。</span></span></li><li id="https://www.notion.so/f80f9ad8a21140edabe49a1762c8be01" class="BulletedList"><span class="SemanticStringArray"><span class="SemanticString">例子：</span></span></li></ul></li></ol><pre id="https://www.notion.so/9932dda9a3f94850abff8605b9540292" class="Code"><code><span class="SemanticStringArray"><span class="SemanticString"><span><span class="token keyword">class</span> <span class="token class-name">MyClass</span><span class="token punctuation">:</span>
    <span class="token keyword">def</span> <span class="token function">__init__</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> x<span class="token punctuation">,</span> y<span class="token punctuation">)</span><span class="token punctuation">:</span>
        self<span class="token punctuation">.</span>x <span class="token operator">=</span> x
        self<span class="token punctuation">.</span>y <span class="token operator">=</span> y

    <span class="token keyword">def</span> <span class="token function">__format__</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> format_spec<span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token keyword">if</span> format_spec <span class="token operator">==</span> <span class="token string">'d'</span><span class="token punctuation">:</span>
            <span class="token keyword">return</span> <span class="token string-interpolation"><span class="token string">f'(</span><span class="token interpolation"><span class="token punctuation">{</span>self<span class="token punctuation">.</span>x<span class="token punctuation">}</span></span><span class="token string">, </span><span class="token interpolation"><span class="token punctuation">{</span>self<span class="token punctuation">.</span>y<span class="token punctuation">}</span></span><span class="token string">)'</span></span>
        <span class="token keyword">elif</span> format_spec <span class="token operator">==</span> <span class="token string">'r'</span><span class="token punctuation">:</span>
            <span class="token keyword">return</span> <span class="token string-interpolation"><span class="token string">f'MyClass(x=</span><span class="token interpolation"><span class="token punctuation">{</span>self<span class="token punctuation">.</span>x<span class="token punctuation">}</span></span><span class="token string">, y=</span><span class="token interpolation"><span class="token punctuation">{</span>self<span class="token punctuation">.</span>y<span class="token punctuation">}</span></span><span class="token string">)'</span></span>
        <span class="token keyword">else</span><span class="token punctuation">:</span>
            <span class="token keyword">return</span> <span class="token builtin">super</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>__format__<span class="token punctuation">(</span>format_spec<span class="token punctuation">)</span>

obj <span class="token operator">=</span> MyClass<span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">,</span> <span class="token number">20</span><span class="token punctuation">)</span>
<span class="token keyword">print</span><span class="token punctuation">(</span><span class="token builtin">format</span><span class="token punctuation">(</span>obj<span class="token punctuation">,</span> <span class="token string">'d'</span><span class="token punctuation">)</span><span class="token punctuation">)</span> 
<span class="token keyword">print</span><span class="token punctuation">(</span><span class="token builtin">format</span><span class="token punctuation">(</span>obj<span class="token punctuation">,</span> <span class="token string">'r'</span><span class="token punctuation">)</span><span class="token punctuation">)</span>  
</span></span></span></code></pre><div id="https://www.notion.so/24b81675939c40918ff247d3a7b7114f" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"></span></p></div><h3 id="https://www.notion.so/2d78df32895a438e8f3a6c260ba627c5" class="ColorfulBlock ColorfulBlock--ColorDefault Heading Heading--3"><a class="Anchor" href="#https://www.notion.so/2d78df32895a438e8f3a6c260ba627c5"><svg width="16" height="16" viewBox="0 0 16 16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a><span class="SemanticStringArray"><span class="SemanticString">9.2如何实现一个Vector2d类</span></span></h3><div id="https://www.notion.so/aebd05573e1e4080afd235da8e394c1a" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"></span></p></div><pre id="https://www.notion.so/826556996801414387568843218bbc69" class="Code Code--NoWrap"><code><span class="SemanticStringArray"></span></code></pre><div id="https://www.notion.so/129cbdd3c2134bbc8d333a6435ba9271" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"><span class="SemanticString"><code class="SemanticString__Fragment SemanticString__Fragment--Code">collections.abc</code></span><span class="SemanticString"> 模块包含了一组抽象基类，用于定义各种容器类型的接口。这些抽象基类提供了一种方式，使你可以检查某个对象是否实现了某种容器接口，并定义新的容器类。以下是 </span><span class="SemanticString"><code class="SemanticString__Fragment SemanticString__Fragment--Code">collections.abc</code></span><span class="SemanticString"> 中一些常用的类：</span></span></p></div><h3 id="https://www.notion.so/bd7fc180200841fd812c798d6bfb8e31" class="ColorfulBlock ColorfulBlock--ColorDefault Heading Heading--3"><a class="Anchor" href="#https://www.notion.so/bd7fc180200841fd812c798d6bfb8e31"><svg width="16" height="16" viewBox="0 0 16 16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a><span class="SemanticStringArray"><span class="SemanticString">1. </span><span class="SemanticString"><code class="SemanticString__Fragment SemanticString__Fragment--Code">Iterable</code></span></span></h3><ul class="BulletedListWrapper"><li id="https://www.notion.so/0e94ec7a77ac4b979cc691b7a1c75fc3" class="BulletedList"><span class="SemanticStringArray"><span class="SemanticString"><strong class="SemanticString__Fragment SemanticString__Fragment--Bold">定义</strong></span><span class="SemanticString">：包含 </span><span class="SemanticString"><code class="SemanticString__Fragment SemanticString__Fragment--Code">__iter__()</code></span><span class="SemanticString"> 方法的对象。</span></span></li><li id="https://www.notion.so/dd2322eb84954f80bf0dc09557a7c9fc" class="BulletedList"><span class="SemanticStringArray"><span class="SemanticString"><strong class="SemanticString__Fragment SemanticString__Fragment--Bold">用途</strong></span><span class="SemanticString">：用于检查对象是否可迭代。</span></span></li><li id="https://www.notion.so/b7e9b0841d4e48d3bcfb2b3fcfd03bce" class="BulletedList"><span class="SemanticStringArray"><span class="SemanticString"><strong class="SemanticString__Fragment SemanticString__Fragment--Bold">示例</strong></span><span class="SemanticString">：</span></span><pre id="https://www.notion.so/7aefdaeeaed44552a5f61b71fcc71ea0" class="Code"><code><span class="SemanticStringArray"><span class="SemanticString"><span><span class="token keyword">from</span> collections<span class="token punctuation">.</span>abc <span class="token keyword">import</span> Iterable

<span class="token keyword">print</span><span class="token punctuation">(</span><span class="token builtin">isinstance</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">]</span><span class="token punctuation">,</span> Iterable<span class="token punctuation">)</span><span class="token punctuation">)</span>  <span class="token comment"># 输出: True</span>
<span class="token keyword">print</span><span class="token punctuation">(</span><span class="token builtin">isinstance</span><span class="token punctuation">(</span><span class="token number">123</span><span class="token punctuation">,</span> Iterable<span class="token punctuation">)</span><span class="token punctuation">)</span>        <span class="token comment"># 输出: False</span>
</span></span></span></code></pre></li></ul><h3 id="https://www.notion.so/89f18a792eca4f75ba5310636dff0136" class="ColorfulBlock ColorfulBlock--ColorDefault Heading Heading--3"><a class="Anchor" href="#https://www.notion.so/89f18a792eca4f75ba5310636dff0136"><svg width="16" height="16" viewBox="0 0 16 16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a><span class="SemanticStringArray"><span class="SemanticString">2. </span><span class="SemanticString"><code class="SemanticString__Fragment SemanticString__Fragment--Code">Iterator</code></span></span></h3><ul class="BulletedListWrapper"><li id="https://www.notion.so/c95b2a15710d43f5bb2dd0d4d55e79b8" class="BulletedList"><span class="SemanticStringArray"><span class="SemanticString"><strong class="SemanticString__Fragment SemanticString__Fragment--Bold">定义</strong></span><span class="SemanticString">：包含 </span><span class="SemanticString"><code class="SemanticString__Fragment SemanticString__Fragment--Code">__iter__()</code></span><span class="SemanticString"> 和 </span><span class="SemanticString"><code class="SemanticString__Fragment SemanticString__Fragment--Code">__next__()</code></span><span class="SemanticString"> 方法的对象。</span></span></li><li id="https://www.notion.so/739b3a0146004d80a26302bbc99a4ff2" class="BulletedList"><span class="SemanticStringArray"><span class="SemanticString"><strong class="SemanticString__Fragment SemanticString__Fragment--Bold">用途</strong></span><span class="SemanticString">：用于检查对象是否为迭代器。</span></span></li><li id="https://www.notion.so/1942cfefa86645a6948e2f9d8a6dbf04" class="BulletedList"><span class="SemanticStringArray"><span class="SemanticString"><strong class="SemanticString__Fragment SemanticString__Fragment--Bold">示例</strong></span><span class="SemanticString">：</span></span><pre id="https://www.notion.so/d3884cdea27b4fe3b061b4a3fa3de058" class="Code"><code><span class="SemanticStringArray"><span class="SemanticString"><span><span class="token keyword">from</span> collections<span class="token punctuation">.</span>abc <span class="token keyword">import</span> Iterator

it <span class="token operator">=</span> <span class="token builtin">iter</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
<span class="token keyword">print</span><span class="token punctuation">(</span><span class="token builtin">isinstance</span><span class="token punctuation">(</span>it<span class="token punctuation">,</span> Iterator<span class="token punctuation">)</span><span class="token punctuation">)</span>  <span class="token comment"># 输出: True</span>
</span></span></span></code></pre></li></ul><h3 id="https://www.notion.so/759c99688a2941f49b3c10e5aa479830" class="ColorfulBlock ColorfulBlock--ColorDefault Heading Heading--3"><a class="Anchor" href="#https://www.notion.so/759c99688a2941f49b3c10e5aa479830"><svg width="16" height="16" viewBox="0 0 16 16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a><span class="SemanticStringArray"><span class="SemanticString">3. </span><span class="SemanticString"><code class="SemanticString__Fragment SemanticString__Fragment--Code">Sequence</code></span></span></h3><ul class="BulletedListWrapper"><li id="https://www.notion.so/3f50500f10494d0892893079cb359a5a" class="BulletedList"><span class="SemanticStringArray"><span class="SemanticString"><strong class="SemanticString__Fragment SemanticString__Fragment--Bold">定义</strong></span><span class="SemanticString">：支持索引和具有长度的对象，需要实现 </span><span class="SemanticString"><code class="SemanticString__Fragment SemanticString__Fragment--Code">__getitem__()</code></span><span class="SemanticString"> 和 </span><span class="SemanticString"><code class="SemanticString__Fragment SemanticString__Fragment--Code">__len__()</code></span><span class="SemanticString"> 方法。</span></span></li><li id="https://www.notion.so/bd1628afdb33423da9a300d3560b7a7a" class="BulletedList"><span class="SemanticStringArray"><span class="SemanticString"><strong class="SemanticString__Fragment SemanticString__Fragment--Bold">用途</strong></span><span class="SemanticString">：用于检查对象是否为序列类型，如列表、元组、字符串等。</span></span></li><li id="https://www.notion.so/14e8491a1fad44a99729b6b7932bb605" class="BulletedList"><span class="SemanticStringArray"><span class="SemanticString"><strong class="SemanticString__Fragment SemanticString__Fragment--Bold">示例</strong></span><span class="SemanticString">：</span></span><pre id="https://www.notion.so/2a89964aee1947118bbd3131247c335a" class="Code"><code><span class="SemanticStringArray"><span class="SemanticString"><span><span class="token keyword">from</span> collections<span class="token punctuation">.</span>abc <span class="token keyword">import</span> Sequence

<span class="token keyword">print</span><span class="token punctuation">(</span><span class="token builtin">isinstance</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">]</span><span class="token punctuation">,</span> Sequence<span class="token punctuation">)</span><span class="token punctuation">)</span>  <span class="token comment"># 输出: True</span>
<span class="token keyword">print</span><span class="token punctuation">(</span><span class="token builtin">isinstance</span><span class="token punctuation">(</span><span class="token string">"abc"</span><span class="token punctuation">,</span> Sequence<span class="token punctuation">)</span><span class="token punctuation">)</span>      <span class="token comment"># 输出: True</span>
<span class="token keyword">print</span><span class="token punctuation">(</span><span class="token builtin">isinstance</span><span class="token punctuation">(</span><span class="token number">123</span><span class="token punctuation">,</span> Sequence<span class="token punctuation">)</span><span class="token punctuation">)</span>        <span class="token comment"># 输出: False</span>
</span></span></span></code></pre></li></ul><h3 id="https://www.notion.so/9eb4da5927f74fae97ece540e0280368" class="ColorfulBlock ColorfulBlock--ColorDefault Heading Heading--3"><a class="Anchor" href="#https://www.notion.so/9eb4da5927f74fae97ece540e0280368"><svg width="16" height="16" viewBox="0 0 16 16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a><span class="SemanticStringArray"><span class="SemanticString">4. </span><span class="SemanticString"><code class="SemanticString__Fragment SemanticString__Fragment--Code">MutableSequence</code></span></span></h3><ul class="BulletedListWrapper"><li id="https://www.notion.so/d418abbf3f8c4fc1811c2d0178ffb616" class="BulletedList"><span class="SemanticStringArray"><span class="SemanticString"><strong class="SemanticString__Fragment SemanticString__Fragment--Bold">定义</strong></span><span class="SemanticString">：在 </span><span class="SemanticString"><code class="SemanticString__Fragment SemanticString__Fragment--Code">Sequence</code></span><span class="SemanticString"> 的基础上增加了可变性，要求实现 </span><span class="SemanticString"><code class="SemanticString__Fragment SemanticString__Fragment--Code">__setitem__()</code></span><span class="SemanticString">、</span><span class="SemanticString"><code class="SemanticString__Fragment SemanticString__Fragment--Code">__delitem__()</code></span><span class="SemanticString"> 和 </span><span class="SemanticString"><code class="SemanticString__Fragment SemanticString__Fragment--Code">append()</code></span><span class="SemanticString">、</span><span class="SemanticString"><code class="SemanticString__Fragment SemanticString__Fragment--Code">insert()</code></span><span class="SemanticString">、</span><span class="SemanticString"><code class="SemanticString__Fragment SemanticString__Fragment--Code">pop()</code></span><span class="SemanticString">、</span><span class="SemanticString"><code class="SemanticString__Fragment SemanticString__Fragment--Code">remove()</code></span><span class="SemanticString"> 等方法。</span></span></li><li id="https://www.notion.so/bb1926a11cff43cda22d085b6cef7858" class="BulletedList"><span class="SemanticStringArray"><span class="SemanticString"><strong class="SemanticString__Fragment SemanticString__Fragment--Bold">用途</strong></span><span class="SemanticString">：用于检查对象是否为可变序列。</span></span></li><li id="https://www.notion.so/758f2f2f18714c508b6ee48126fe8ad1" class="BulletedList"><span class="SemanticStringArray"><span class="SemanticString"><strong class="SemanticString__Fragment SemanticString__Fragment--Bold">示例</strong></span><span class="SemanticString">：</span></span><pre id="https://www.notion.so/deb5beeb06ff4160ac5531c77c1f644f" class="Code"><code><span class="SemanticStringArray"><span class="SemanticString"><span><span class="token keyword">from</span> collections<span class="token punctuation">.</span>abc <span class="token keyword">import</span> MutableSequence

<span class="token keyword">class</span> <span class="token class-name">MyList</span><span class="token punctuation">(</span><span class="token builtin">list</span><span class="token punctuation">,</span> MutableSequence<span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token keyword">pass</span>

my_list <span class="token operator">=</span> MyList<span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
<span class="token keyword">print</span><span class="token punctuation">(</span><span class="token builtin">isinstance</span><span class="token punctuation">(</span>my_list<span class="token punctuation">,</span> MutableSequence<span class="token punctuation">)</span><span class="token punctuation">)</span>  <span class="token comment"># 输出: True</span>
</span></span></span></code></pre></li></ul><h3 id="https://www.notion.so/aec38796f4114a7d8d4ee8cc9f860f91" class="ColorfulBlock ColorfulBlock--ColorDefault Heading Heading--3"><a class="Anchor" href="#https://www.notion.so/aec38796f4114a7d8d4ee8cc9f860f91"><svg width="16" height="16" viewBox="0 0 16 16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a><span class="SemanticStringArray"><span class="SemanticString">5. </span><span class="SemanticString"><code class="SemanticString__Fragment SemanticString__Fragment--Code">Mapping</code></span></span></h3><ul class="BulletedListWrapper"><li id="https://www.notion.so/c897a12911e0470e9f5863b6010a47f0" class="BulletedList"><span class="SemanticStringArray"><span class="SemanticString"><strong class="SemanticString__Fragment SemanticString__Fragment--Bold">定义</strong></span><span class="SemanticString">：表示映射类型，需要实现 </span><span class="SemanticString"><code class="SemanticString__Fragment SemanticString__Fragment--Code">__getitem__()</code></span><span class="SemanticString">、</span><span class="SemanticString"><code class="SemanticString__Fragment SemanticString__Fragment--Code">__iter__()</code></span><span class="SemanticString"> 和 </span><span class="SemanticString"><code class="SemanticString__Fragment SemanticString__Fragment--Code">__len__()</code></span><span class="SemanticString"> 方法。</span></span></li><li id="https://www.notion.so/b657bdf9aa2f48e890afb767c79bfed8" class="BulletedList"><span class="SemanticStringArray"><span class="SemanticString"><strong class="SemanticString__Fragment SemanticString__Fragment--Bold">用途</strong></span><span class="SemanticString">：用于检查对象是否为映射类型，如字典。</span></span></li><li id="https://www.notion.so/5b223cce4bf9405188c31ae866c04efe" class="BulletedList"><span class="SemanticStringArray"><span class="SemanticString"><strong class="SemanticString__Fragment SemanticString__Fragment--Bold">示例</strong></span><span class="SemanticString">：</span></span><pre id="https://www.notion.so/07993f97e84f440eab59e0e2ccc86a14" class="Code"><code><span class="SemanticStringArray"><span class="SemanticString"><span><span class="token keyword">from</span> collections<span class="token punctuation">.</span>abc <span class="token keyword">import</span> Mapping

<span class="token keyword">print</span><span class="token punctuation">(</span><span class="token builtin">isinstance</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token string">"key"</span><span class="token punctuation">:</span> <span class="token string">"value"</span><span class="token punctuation">}</span><span class="token punctuation">,</span> Mapping<span class="token punctuation">)</span><span class="token punctuation">)</span>  <span class="token comment"># 输出: True</span>
</span></span></span></code></pre></li></ul><h3 id="https://www.notion.so/f7b8521b51f44faa9fdfa4580b1e1283" class="ColorfulBlock ColorfulBlock--ColorDefault Heading Heading--3"><a class="Anchor" href="#https://www.notion.so/f7b8521b51f44faa9fdfa4580b1e1283"><svg width="16" height="16" viewBox="0 0 16 16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a><span class="SemanticStringArray"><span class="SemanticString">6. </span><span class="SemanticString"><code class="SemanticString__Fragment SemanticString__Fragment--Code">MutableMapping</code></span></span></h3><ul class="BulletedListWrapper"><li id="https://www.notion.so/8f8df14bf4914662a3e71fff3ab2275b" class="BulletedList"><span class="SemanticStringArray"><span class="SemanticString"><strong class="SemanticString__Fragment SemanticString__Fragment--Bold">定义</strong></span><span class="SemanticString">：在 </span><span class="SemanticString"><code class="SemanticString__Fragment SemanticString__Fragment--Code">Mapping</code></span><span class="SemanticString"> 的基础上增加了可变性，要求实现 </span><span class="SemanticString"><code class="SemanticString__Fragment SemanticString__Fragment--Code">__setitem__()</code></span><span class="SemanticString">、</span><span class="SemanticString"><code class="SemanticString__Fragment SemanticString__Fragment--Code">__delitem__()</code></span><span class="SemanticString"> 等方法。</span></span></li><li id="https://www.notion.so/9cea1db57658423097842158d24ad61a" class="BulletedList"><span class="SemanticStringArray"><span class="SemanticString"><strong class="SemanticString__Fragment SemanticString__Fragment--Bold">用途</strong></span><span class="SemanticString">：用于检查对象是否为可变映射。</span></span></li><li id="https://www.notion.so/9d444982978341ee9053578390944f85" class="BulletedList"><span class="SemanticStringArray"><span class="SemanticString"><strong class="SemanticString__Fragment SemanticString__Fragment--Bold">示例</strong></span><span class="SemanticString">：</span></span><pre id="https://www.notion.so/59a4f311b4bf41d896a92094694586c8" class="Code"><code><span class="SemanticStringArray"><span class="SemanticString"><span><span class="token keyword">from</span> collections<span class="token punctuation">.</span>abc <span class="token keyword">import</span> MutableMapping

<span class="token keyword">class</span> <span class="token class-name">MyDict</span><span class="token punctuation">(</span><span class="token builtin">dict</span><span class="token punctuation">,</span> MutableMapping<span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token keyword">pass</span>

my_dict <span class="token operator">=</span> MyDict<span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token string">"key"</span><span class="token punctuation">:</span> <span class="token string">"value"</span><span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token keyword">print</span><span class="token punctuation">(</span><span class="token builtin">isinstance</span><span class="token punctuation">(</span>my_dict<span class="token punctuation">,</span> MutableMapping<span class="token punctuation">)</span><span class="token punctuation">)</span>  <span class="token comment"># 输出: True</span>
</span></span></span></code></pre></li></ul><h3 id="https://www.notion.so/10c7cf097da34ea69aaf1764fd2d7a64" class="ColorfulBlock ColorfulBlock--ColorDefault Heading Heading--3"><a class="Anchor" href="#https://www.notion.so/10c7cf097da34ea69aaf1764fd2d7a64"><svg width="16" height="16" viewBox="0 0 16 16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a><span class="SemanticStringArray"><span class="SemanticString">7. </span><span class="SemanticString"><code class="SemanticString__Fragment SemanticString__Fragment--Code">Set</code></span></span></h3><ul class="BulletedListWrapper"><li id="https://www.notion.so/767ffa90c38841a3857b1a660fd9a577" class="BulletedList"><span class="SemanticStringArray"><span class="SemanticString"><strong class="SemanticString__Fragment SemanticString__Fragment--Bold">定义</strong></span><span class="SemanticString">：表示集合类型，需要实现 </span><span class="SemanticString"><code class="SemanticString__Fragment SemanticString__Fragment--Code">__contains__()</code></span><span class="SemanticString">、</span><span class="SemanticString"><code class="SemanticString__Fragment SemanticString__Fragment--Code">__iter__()</code></span><span class="SemanticString"> 和 </span><span class="SemanticString"><code class="SemanticString__Fragment SemanticString__Fragment--Code">__len__()</code></span><span class="SemanticString"> 方法。</span></span></li><li id="https://www.notion.so/46a269e2334a4b4fb12e7def59212ba4" class="BulletedList"><span class="SemanticStringArray"><span class="SemanticString"><strong class="SemanticString__Fragment SemanticString__Fragment--Bold">用途</strong></span><span class="SemanticString">：用于检查对象是否为集合类型。</span></span></li><li id="https://www.notion.so/8c55777b2e0e4b41a7fd14787d1d4e91" class="BulletedList"><span class="SemanticStringArray"><span class="SemanticString"><strong class="SemanticString__Fragment SemanticString__Fragment--Bold">示例</strong></span><span class="SemanticString">：</span></span><pre id="https://www.notion.so/2c3c3bc51de44618b8db880dc054bd52" class="Code"><code><span class="SemanticStringArray"><span class="SemanticString"><span><span class="token keyword">from</span> collections<span class="token punctuation">.</span>abc <span class="token keyword">import</span> Set

<span class="token keyword">print</span><span class="token punctuation">(</span><span class="token builtin">isinstance</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">}</span><span class="token punctuation">,</span> Set<span class="token punctuation">)</span><span class="token punctuation">)</span>  <span class="token comment"># 输出: True</span>
</span></span></span></code></pre></li></ul><h3 id="https://www.notion.so/33e87fc7784d4f1fa76a40787e281712" class="ColorfulBlock ColorfulBlock--ColorDefault Heading Heading--3"><a class="Anchor" href="#https://www.notion.so/33e87fc7784d4f1fa76a40787e281712"><svg width="16" height="16" viewBox="0 0 16 16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a><span class="SemanticStringArray"><span class="SemanticString">8. </span><span class="SemanticString"><code class="SemanticString__Fragment SemanticString__Fragment--Code">MutableSet</code></span></span></h3><ul class="BulletedListWrapper"><li id="https://www.notion.so/7ec165cd7b9340848caed534e2772e65" class="BulletedList"><span class="SemanticStringArray"><span class="SemanticString"><strong class="SemanticString__Fragment SemanticString__Fragment--Bold">定义</strong></span><span class="SemanticString">：在 </span><span class="SemanticString"><code class="SemanticString__Fragment SemanticString__Fragment--Code">Set</code></span><span class="SemanticString"> 的基础上增加了可变性，要求实现 </span><span class="SemanticString"><code class="SemanticString__Fragment SemanticString__Fragment--Code">add()</code></span><span class="SemanticString"> 和 </span><span class="SemanticString"><code class="SemanticString__Fragment SemanticString__Fragment--Code">discard()</code></span><span class="SemanticString"> 方法。</span></span></li><li id="https://www.notion.so/6c824de870124cbb9f90390a89a4d0cc" class="BulletedList"><span class="SemanticStringArray"><span class="SemanticString"><strong class="SemanticString__Fragment SemanticString__Fragment--Bold">用途</strong></span><span class="SemanticString">：用于检查对象是否为可变集合。</span></span></li><li id="https://www.notion.so/38c4bd223fcb45a7b2ff07d47adbbb1a" class="BulletedList"><span class="SemanticStringArray"><span class="SemanticString"><strong class="SemanticString__Fragment SemanticString__Fragment--Bold">示例</strong></span><span class="SemanticString">：</span></span><pre id="https://www.notion.so/dcc855dfd0bd4fc9b1a01fd91da95ced" class="Code"><code><span class="SemanticStringArray"><span class="SemanticString"><span><span class="token keyword">from</span> collections<span class="token punctuation">.</span>abc <span class="token keyword">import</span> MutableSet

<span class="token keyword">class</span> <span class="token class-name">MySet</span><span class="token punctuation">(</span><span class="token builtin">set</span><span class="token punctuation">,</span> MutableSet<span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token keyword">pass</span>

my_set <span class="token operator">=</span> MySet<span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
<span class="token keyword">print</span><span class="token punctuation">(</span><span class="token builtin">isinstance</span><span class="token punctuation">(</span>my_set<span class="token punctuation">,</span> MutableSet<span class="token punctuation">)</span><span class="token punctuation">)</span>  <span class="token comment"># 输出: True</span>
</span></span></span></code></pre></li></ul><div id="https://www.notion.so/fe58c01ad5b94a5e8650e81b9df4f46d" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"><span class="SemanticString">这些抽象基类可以帮助你定义和检查容器类型的接口和行为，确保对象符合预期的协议和接口，增强代码的可读性和健壮性。</span></span></p></div><div id="https://www.notion.so/c1d7570d8e584dfd8764e39f8e07eb42" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"><span class="SemanticString">生成器表达式逐个产出元素，从来不会一次性产出一个含有6个T恤样式的列表t</span></span></p></div><div id="https://www.notion.so/709ef367ba444062bb3fd00b661aeb53" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"></span></p></div><div id="https://www.notion.so/e7a822dd368b40c2bd963d484f54a2b7" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"></span></p></div><div id="https://www.notion.so/9d55cd2240284286b5df9cc3790dff78" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"><span class="SemanticString">在Python 3中，生成器有广泛的用途。现在，即使是内置的range（　）函数也返回一个类似生成器的对象，而以前则返回完整的列表。如果一定要让range（　）函数返回列表，那么必须明确指明（例如，list(range(100))）</span></span></p></div><div id="https://www.notion.so/5a91803b8e4048378a04c70ce66135e6" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"></span></p></div><div id="https://www.notion.so/3f6a4f3c0b1b480d908f2f0b9d7e3e9b" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"><span class="SemanticString">这段代码演示了如何手动迭代字符串 </span><span class="SemanticString"><code class="SemanticString__Fragment SemanticString__Fragment--Code">&#x27;ABC&#x27;</code></span><span class="SemanticString"> 中的每个字符，并在迭代完成后清理迭代器对象。</span></span></p></div><div id="https://www.notion.so/4886413846a54f95b94c5c3677355499" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"><span class="SemanticString">让我们逐行解释这段代码：</span></span></p></div><h3 id="https://www.notion.so/a42b888c20f245c69b848a0c5b9e764f" class="ColorfulBlock ColorfulBlock--ColorDefault Heading Heading--3"><a class="Anchor" href="#https://www.notion.so/a42b888c20f245c69b848a0c5b9e764f"><svg width="16" height="16" viewBox="0 0 16 16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a><span class="SemanticStringArray"><span class="SemanticString">代码</span></span></h3><pre id="https://www.notion.so/c75e70607e9643098936af9f05ff0e6d" class="Code"><code><span class="SemanticStringArray"><span class="SemanticString"><span>s <span class="token operator">=</span> <span class="token string">'ABC'</span>
it <span class="token operator">=</span> <span class="token builtin">iter</span><span class="token punctuation">(</span>s<span class="token punctuation">)</span>  <span class="token comment"># ➊</span>
<span class="token keyword">while</span> <span class="token boolean">True</span><span class="token punctuation">:</span>
    <span class="token keyword">try</span><span class="token punctuation">:</span>
        <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token builtin">next</span><span class="token punctuation">(</span>it<span class="token punctuation">)</span><span class="token punctuation">)</span>  <span class="token comment"># ➋</span>
    <span class="token keyword">except</span> StopIteration<span class="token punctuation">:</span>  <span class="token comment"># ➌</span>
        <span class="token keyword">del</span> it  <span class="token comment"># ➍</span>
        <span class="token keyword">break</span>  <span class="token comment"># ➎</span>
</span></span></span></code></pre><h3 id="https://www.notion.so/d76e9cd41c0b46c79d4fe49e16887569" class="ColorfulBlock ColorfulBlock--ColorDefault Heading Heading--3"><a class="Anchor" href="#https://www.notion.so/d76e9cd41c0b46c79d4fe49e16887569"><svg width="16" height="16" viewBox="0 0 16 16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a><span class="SemanticStringArray"><span class="SemanticString">解释</span></span></h3><ol class="NumberedListWrapper"><li id="https://www.notion.so/640e98dd2f384e85b1d97780af68235a" class="NumberedList" value="1"><span class="SemanticStringArray"><span class="SemanticString"><code class="SemanticString__Fragment SemanticString__Fragment--Code">s = &#x27;ABC&#x27;</code></span><span class="SemanticString">：定义了一个字符串 </span><span class="SemanticString"><code class="SemanticString__Fragment SemanticString__Fragment--Code">&#x27;ABC&#x27;</code></span><span class="SemanticString">。</span></span></li><li id="https://www.notion.so/a7538d53ba8d4dbb94936e8423403dab" class="NumberedList" value="2"><span class="SemanticStringArray"><span class="SemanticString"><code class="SemanticString__Fragment SemanticString__Fragment--Code">it = iter(s)</code></span><span class="SemanticString">：使用 </span><span class="SemanticString"><code class="SemanticString__Fragment SemanticString__Fragment--Code">iter()</code></span><span class="SemanticString"> 函数将字符串转换为迭代器对象，并将其赋值给变量 </span><span class="SemanticString"><code class="SemanticString__Fragment SemanticString__Fragment--Code">it</code></span><span class="SemanticString">。迭代器用于逐个返回字符串中的字符。</span></span></li><li id="https://www.notion.so/d393efefdab44a739c234207049c2c28" class="NumberedList" value="3"><span class="SemanticStringArray"><span class="SemanticString"><code class="SemanticString__Fragment SemanticString__Fragment--Code">while True:</code></span><span class="SemanticString">：无限循环。</span></span></li><li id="https://www.notion.so/c841020c5fff4f5eb8f74f4b148340a0" class="NumberedList" value="4"><span class="SemanticStringArray"><span class="SemanticString"><code class="SemanticString__Fragment SemanticString__Fragment--Code">try:</code></span><span class="SemanticString">：尝试执行下面的代码块。</span></span></li><li id="https://www.notion.so/900c658eb464421ba03fc20b0cc5fa9e" class="NumberedList" value="5"><span class="SemanticStringArray"><span class="SemanticString"><code class="SemanticString__Fragment SemanticString__Fragment--Code">print(next(it))</code></span><span class="SemanticString">：使用 </span><span class="SemanticString"><code class="SemanticString__Fragment SemanticString__Fragment--Code">next()</code></span><span class="SemanticString"> 函数从迭代器中获取下一个元素（即下一个字符），并打印出来。在每次迭代中，</span><span class="SemanticString"><code class="SemanticString__Fragment SemanticString__Fragment--Code">next()</code></span><span class="SemanticString"> 函数都会返回字符串中的下一个字符。</span></span></li><li id="https://www.notion.so/239c6993077049f5af660949d3278ed0" class="NumberedList" value="6"><span class="SemanticStringArray"><span class="SemanticString"><code class="SemanticString__Fragment SemanticString__Fragment--Code">except StopIteration:</code></span><span class="SemanticString">：捕获 </span><span class="SemanticString"><code class="SemanticString__Fragment SemanticString__Fragment--Code">StopIteration</code></span><span class="SemanticString"> 异常，该异常会在迭代器耗尽时触发，表示迭代结束。当迭代结束后，程序会执行下面的代码。</span></span></li><li id="https://www.notion.so/a5a3ab9026de457dbd89abb1305e7492" class="NumberedList" value="7"><span class="SemanticStringArray"><span class="SemanticString"><code class="SemanticString__Fragment SemanticString__Fragment--Code">del it</code></span><span class="SemanticString">：删除迭代器对象 </span><span class="SemanticString"><code class="SemanticString__Fragment SemanticString__Fragment--Code">it</code></span><span class="SemanticString">，释放相关的资源。</span></span></li><li id="https://www.notion.so/8948847851d64686bbc095c2f7d56d37" class="NumberedList" value="8"><span class="SemanticStringArray"><span class="SemanticString"><code class="SemanticString__Fragment SemanticString__Fragment--Code">break</code></span><span class="SemanticString">：退出循环。</span></span></li></ol><h3 id="https://www.notion.so/8d5d17e9291e448da0c016352b04fbdc" class="ColorfulBlock ColorfulBlock--ColorDefault Heading Heading--3"><a class="Anchor" href="#https://www.notion.so/8d5d17e9291e448da0c016352b04fbdc"><svg width="16" height="16" viewBox="0 0 16 16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a><span class="SemanticStringArray"><span class="SemanticString">结果</span></span></h3><div id="https://www.notion.so/320ec49ebbb7482a9088424119db9afd" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"><span class="SemanticString">这段代码会输出字符串 </span><span class="SemanticString"><code class="SemanticString__Fragment SemanticString__Fragment--Code">&#x27;ABC&#x27;</code></span><span class="SemanticString"> 中的每个字符，然后清理迭代器对象并退出循环。</span></span></p></div><h3 id="https://www.notion.so/dc1b7797368f41a6b6c5812bc0358294" class="ColorfulBlock ColorfulBlock--ColorDefault Heading Heading--3"><a class="Anchor" href="#https://www.notion.so/dc1b7797368f41a6b6c5812bc0358294"><svg width="16" height="16" viewBox="0 0 16 16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a><span class="SemanticStringArray"><span class="SemanticString">注意事项</span></span></h3><div id="https://www.notion.so/257af715019a4878bfd0c6714e3ab179" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"><span class="SemanticString">虽然这段代码展示了如何手动迭代字符串，并且在迭代完成后清理了迭代器对象，但在实际编程中，大多数情况下你无需手动执行这些步骤。Python 的 </span><span class="SemanticString"><code class="SemanticString__Fragment SemanticString__Fragment--Code">for</code></span><span class="SemanticString"> 循环会自动处理迭代器的创建和清理，使得代码更加简洁和易读。</span></span></p></div><div id="https://www.notion.so/9c394f044da74ff6956c4cdb5a6d350b" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"></span></p></div><div id="https://www.notion.so/55523712860b4f4aa3585ce6ac5f0993" class="Image Image--PageWidth"><figure><a href="https://www.notion.so/signed/https%3A%2F%2Fprod-files-secure.s3.us-west-2.amazonaws.com%2F1c20d6dc-620b-4cb7-975f-a5c8ee0dd99a%2F3662fb8f-f7c6-4942-af02-3a000f2daf41%2FUntitled.png?width=1263&amp;table=block&amp;id=55523712-860b-4f4a-a358-5ce6ac5f0993"><img src="https://www.notion.so/signed/https%3A%2F%2Fprod-files-secure.s3.us-west-2.amazonaws.com%2F1c20d6dc-620b-4cb7-975f-a5c8ee0dd99a%2F3662fb8f-f7c6-4942-af02-3a000f2daf41%2FUntitled.png?width=1263&amp;table=block&amp;id=55523712-860b-4f4a-a358-5ce6ac5f0993" style="width:100%"/></a><figcaption><span class="SemanticStringArray"></span></figcaption></figure></div><div id="https://www.notion.so/cc40ed755ef8473895482ac3fef16ae6" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"></span></p></div><div id="https://www.notion.so/22f8de0a68f44af2b1f93e9443a03631" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"></span></p></div><div id="https://www.notion.so/37994b1749754874a074c92c45b6cd74" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"><span class="SemanticString">class Iterator(Iterable):￼
</span><span class="SemanticString"><strong class="SemanticString__Fragment SemanticString__Fragment--Bold">slots</strong></span><span class="SemanticString"> = （　）￼
@abstractmethod￼
def </span><span class="SemanticString"><strong class="SemanticString__Fragment SemanticString__Fragment--Bold">next</strong></span><span class="SemanticString">(self):￼
&#x27;Return the next item from the iterator. When exhausted, raise StopIteration&#x27;￼
raise StopIteration￼
def </span><span class="SemanticString"><strong class="SemanticString__Fragment SemanticString__Fragment--Bold">iter</strong></span><span class="SemanticString">(self):￼
return self￼
@classmethod￼
def </span><span class="SemanticString"><strong class="SemanticString__Fragment SemanticString__Fragment--Bold">subclasshook</strong></span><span class="SemanticString">(cls, C):￼
if cls is Iterator:￼
if (any(&quot;</span><span class="SemanticString"><strong class="SemanticString__Fragment SemanticString__Fragment--Bold">next</strong></span><span class="SemanticString">&quot; in B.</span><span class="SemanticString"><strong class="SemanticString__Fragment SemanticString__Fragment--Bold">dict</strong></span><span class="SemanticString"> for B in C.</span><span class="SemanticString"><strong class="SemanticString__Fragment SemanticString__Fragment--Bold">mro</strong></span><span class="SemanticString">) and￼
any(&quot;</span><span class="SemanticString"><strong class="SemanticString__Fragment SemanticString__Fragment--Bold">iter</strong></span><span class="SemanticString">&quot; in B.</span><span class="SemanticString"><strong class="SemanticString__Fragment SemanticString__Fragment--Bold">dict</strong></span><span class="SemanticString"> for B in C.</span><span class="SemanticString"><strong class="SemanticString__Fragment SemanticString__Fragment--Bold">mro</strong></span><span class="SemanticString">)):￼
return True￼
return NotImplemented</span></span></p></div><div id="https://www.notion.so/61d9700b75c54a4c9206adb09ce0b8b4" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"></span></p></div><div id="https://www.notion.so/4bd0d60e2b274d7ea0d7e8f591ed6ce3" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"><span class="SemanticString">迭代器
迭代器是这样的对象：实现了无参数的__next__方法，返回序列中的下一个元素；如果没有元素了，那么抛出StopIteration异常。Python中的迭代器还实现了__iter__方法，因此迭代器也可以迭代。
因为内置的iter(...)函数会对序列做特殊处理，所以第1版Sentence类可以迭代。接下来要实现标准的可迭代协议。</span></span></p></div><div id="https://www.notion.so/8d5e18275ecd42138180e3428423c899" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"><span class="SemanticString">为了“支持多种遍历”，必须能从同一个可迭代的实例中获取多个独立的迭代器，而且各个迭代器要能维护自身的内部状态，因此这一模式正确的实现方式是，每次调用iter(my_iterable)都新建一个独立的迭代器。这就是为什么这个示例需要定义SentenceIterator类。</span></span></p></div><div id="https://www.notion.so/64a2749528074d58bd6aa9eb5d314974" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"></span></p></div><div id="https://www.notion.so/833e15d556684914bce86f3bbd1c3d95" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"><span class="SemanticString">import re
import reprlib</span></span></p></div><div id="https://www.notion.so/9242c7beb4ac4ce28716feaf37667f18" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"><span class="SemanticString">RE_WORD = re.compile(&#x27;\w+&#x27;)</span></span></p></div><div id="https://www.notion.so/9a590f89ce9c4d6781b9e6fddbf9ef81" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"><span class="SemanticString">class Sentence:
def </span><span class="SemanticString"><strong class="SemanticString__Fragment SemanticString__Fragment--Bold">init</strong></span><span class="SemanticString">(self, text):
self.text = text
self.words = RE_WORD.findall(text)</span></span></p></div><pre id="https://www.notion.so/c40c3d256a3f4724bdffcf9128132716" class="Code"><code><span class="SemanticStringArray"><span class="SemanticString"><span>def __repr__(self):
    return &#x27;Sentence(%s)&#x27; % reprlib.repr(self.text)

def __iter__(self):  # ➊
    return SentenceIterator(self.words)  # ➋
</span></span></span></code></pre><div id="https://www.notion.so/969a8ff90ae24d7db5076329fb28d110" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"><span class="SemanticString">class SentenceIterator:
def </span><span class="SemanticString"><strong class="SemanticString__Fragment SemanticString__Fragment--Bold">init</strong></span><span class="SemanticString">(self, words):
self.words = words  # ➌
self.index = 0  # ➍</span></span></p></div><pre id="https://www.notion.so/1e9d53c1e8744cf5a11cd1fbf187018f" class="Code"><code><span class="SemanticStringArray"><span class="SemanticString"><span>def __next__(self):
    try:
        word = self.words[self.index]  # ➎
    except IndexError:
        raise StopIteration()  # ➏
    self.index += 1  # ➐
    return word  # ➑

def __iter__(self):  # ➒
    return self
</span></span></span></code></pre><div id="https://www.notion.so/4e79484a2f23444fbaf1484bb74ce77d" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"><span class="SemanticString">只要Python函数的定义体中有yield关键字，该函数就是生成器函数。调用生成器函数时，会返回一个生成器对象。也就是说，生成器函数是生成器工厂。</span></span></p></div><div id="https://www.notion.so/d275566cb2b74dd998702c963de3e7a3" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"></span></p></div><div id="https://www.notion.so/63d2173f719a4e9c85a5e941047c32db" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"><span class="SemanticString">生成器（Generator）是一种特殊的迭代器，它使用了类似函数的语法来定义，但在执行时会产生一个值序列，而不是一次性生成整个序列。生成器对象是惰性计算的，只在需要时生成值，节省了内存空间并提高了效率。</span></span></p></div><div id="https://www.notion.so/ac89b777968c4833a43c0e38f3c4cbe6" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"><span class="SemanticString">以下是一个示例，演示了如何使用生成器来生成斐波那契数列：</span></span></p></div><pre id="https://www.notion.so/71ce969c15f84962828a69a31a3086f2" class="Code"><code><span class="SemanticStringArray"><span class="SemanticString"><span><span class="token keyword">def</span> <span class="token function">fibonacci</span><span class="token punctuation">(</span>n<span class="token punctuation">)</span><span class="token punctuation">:</span>
    a<span class="token punctuation">,</span> b <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">1</span>
    <span class="token keyword">for</span> _ <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span>n<span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token keyword">yield</span> a
        a<span class="token punctuation">,</span> b <span class="token operator">=</span> b<span class="token punctuation">,</span> a <span class="token operator">+</span> b

<span class="token comment"># 使用生成器生成斐波那契数列的前 10 个数</span>
fib_sequence <span class="token operator">=</span> fibonacci<span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">)</span>
<span class="token keyword">for</span> num <span class="token keyword">in</span> fib_sequence<span class="token punctuation">:</span>
    <span class="token keyword">print</span><span class="token punctuation">(</span>num<span class="token punctuation">)</span>
</span></span></span></code></pre><div id="https://www.notion.so/03bb9da60fb4483faf701f7e78c53e7a" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"><span class="SemanticString">在这个示例中，</span><span class="SemanticString"><code class="SemanticString__Fragment SemanticString__Fragment--Code">fibonacci()</code></span><span class="SemanticString"> 函数是一个生成器函数，它使用 </span><span class="SemanticString"><code class="SemanticString__Fragment SemanticString__Fragment--Code">yield</code></span><span class="SemanticString"> 关键字来产生斐波那契数列中的每个数字。当迭代器的 </span><span class="SemanticString"><code class="SemanticString__Fragment SemanticString__Fragment--Code">__next__()</code></span><span class="SemanticString"> 方法被调用时，函数会从 </span><span class="SemanticString"><code class="SemanticString__Fragment SemanticString__Fragment--Code">yield</code></span><span class="SemanticString"> 语句的位置开始执行，直到遇到下一个 </span><span class="SemanticString"><code class="SemanticString__Fragment SemanticString__Fragment--Code">yield</code></span><span class="SemanticString"> 语句为止，然后暂停并返回当前生成的值。下次调用 </span><span class="SemanticString"><code class="SemanticString__Fragment SemanticString__Fragment--Code">__next__()</code></span><span class="SemanticString"> 方法时，函数会从上次暂停的位置继续执行，直到再次遇到 </span><span class="SemanticString"><code class="SemanticString__Fragment SemanticString__Fragment--Code">yield</code></span><span class="SemanticString"> 语句。这样，通过多次调用迭代器的 </span><span class="SemanticString"><code class="SemanticString__Fragment SemanticString__Fragment--Code">__next__()</code></span><span class="SemanticString"> 方法，就可以逐个生成斐波那契数列的值。</span></span></p></div><div id="https://www.notion.so/46634173ff5846b7a0377d653c6a0826" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"><span class="SemanticString">使用生成器的好处是它们在生成值时不需要将所有值保存在内存中，而是根据 需要逐个生成值，这样可以节省大量的内存空间。生成器还可以用于处理大型数据集或无限序列，因为它们可以逐个产生值而不会消耗太多内存。</span></span></p></div><div id="https://www.notion.so/a4d66d66845741c7873885f5ad86409f" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"><span class="SemanticString"> </span></span></p></div><div id="https://www.notion.so/c340724da82243e59df618f8f257d680" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"></span></p></div><div id="https://www.notion.so/69b13440be1245f480bf6f0870b01dd9" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"><span class="SemanticString">元组拆包（Tuple Unpacking）是 Python 中的一种常用操作，允许我们将元组中的元素解包并赋值给多个变量。这种操作不仅限于元组，还可以应用于列表或其他可迭代对象。拆包可以使代码更加简洁和可读。</span></span></p></div><h3 id="https://www.notion.so/985eba243b1445f8bd0971b8bcfcf4c3" class="ColorfulBlock ColorfulBlock--ColorDefault Heading Heading--3"><a class="Anchor" href="#https://www.notion.so/985eba243b1445f8bd0971b8bcfcf4c3"><svg width="16" height="16" viewBox="0 0 16 16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a><span class="SemanticStringArray"><span class="SemanticString">基本用法</span></span></h3><pre id="https://www.notion.so/9d5d85be5aee4b9bac82e7f2538f385a" class="Code"><code><span class="SemanticStringArray"><span class="SemanticString"><span><span class="token comment"># 元组拆包</span>
t <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">)</span>
a<span class="token punctuation">,</span> b<span class="token punctuation">,</span> c <span class="token operator">=</span> t
<span class="token keyword">print</span><span class="token punctuation">(</span>a<span class="token punctuation">)</span>  <span class="token comment"># 输出: 1</span>
<span class="token keyword">print</span><span class="token punctuation">(</span>b<span class="token punctuation">)</span>  <span class="token comment"># 输出: 2</span>
<span class="token keyword">print</span><span class="token punctuation">(</span>c<span class="token punctuation">)</span>  <span class="token comment"># 输出: 3</span>

<span class="token comment"># 列表拆包</span>
l <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">,</span> <span class="token number">6</span><span class="token punctuation">]</span>
x<span class="token punctuation">,</span> y<span class="token punctuation">,</span> z <span class="token operator">=</span> l
<span class="token keyword">print</span><span class="token punctuation">(</span>x<span class="token punctuation">)</span>  <span class="token comment"># 输出: 4</span>
<span class="token keyword">print</span><span class="token punctuation">(</span>y<span class="token punctuation">)</span>  <span class="token comment"># 输出: 5</span>
<span class="token keyword">print</span><span class="token punctuation">(</span>z<span class="token punctuation">)</span>  <span class="token comment"># 输出: 6</span>
</span></span></span></code></pre><h3 id="https://www.notion.so/14b6881f08e4482eaecc23e26c96d8f7" class="ColorfulBlock ColorfulBlock--ColorDefault Heading Heading--3"><a class="Anchor" href="#https://www.notion.so/14b6881f08e4482eaecc23e26c96d8f7"><svg width="16" height="16" viewBox="0 0 16 16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a><span class="SemanticStringArray"><span class="SemanticString">使用拆包交换变量值</span></span></h3><pre id="https://www.notion.so/bded9f93e56b4abd88ba8f5b07d2afe3" class="Code"><code><span class="SemanticStringArray"><span class="SemanticString"><span><span class="token comment"># 交换变量值</span>
a<span class="token punctuation">,</span> b <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span>
a<span class="token punctuation">,</span> b <span class="token operator">=</span> b<span class="token punctuation">,</span> a
<span class="token keyword">print</span><span class="token punctuation">(</span>a<span class="token punctuation">)</span>  <span class="token comment"># 输出: 2</span>
<span class="token keyword">print</span><span class="token punctuation">(</span>b<span class="token punctuation">)</span>  <span class="token comment"># 输出: 1</span>
</span></span></span></code></pre><h3 id="https://www.notion.so/0364f772f9fb4117a7524b2b97a17256" class="ColorfulBlock ColorfulBlock--ColorDefault Heading Heading--3"><a class="Anchor" href="#https://www.notion.so/0364f772f9fb4117a7524b2b97a17256"><svg width="16" height="16" viewBox="0 0 16 16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a><span class="SemanticStringArray"><span class="SemanticString">拆包与函数返回值</span></span></h3><div id="https://www.notion.so/8839777ae33f4c20a819ace19ae5fde0" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"><span class="SemanticString">拆包特别适用于函数返回多个值的情况：</span></span></p></div><pre id="https://www.notion.so/91ce9c7c76f74f0a9085ff8a94f5edd5" class="Code"><code><span class="SemanticStringArray"><span class="SemanticString"><span><span class="token keyword">def</span> <span class="token function">get_coordinates</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token keyword">return</span> <span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">,</span> <span class="token number">20</span><span class="token punctuation">)</span>

x<span class="token punctuation">,</span> y <span class="token operator">=</span> get_coordinates<span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token keyword">print</span><span class="token punctuation">(</span>x<span class="token punctuation">)</span>  <span class="token comment"># 输出: 10</span>
<span class="token keyword">print</span><span class="token punctuation">(</span>y<span class="token punctuation">)</span>  <span class="token comment"># 输出: 20</span>
</span></span></span></code></pre><h3 id="https://www.notion.so/74b3fa0b385a43c5a324c03b8178d429" class="ColorfulBlock ColorfulBlock--ColorDefault Heading Heading--3"><a class="Anchor" href="#https://www.notion.so/74b3fa0b385a43c5a324c03b8178d429"><svg width="16" height="16" viewBox="0 0 16 16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a><span class="SemanticStringArray"><span class="SemanticString">拆包与迭代</span></span></h3><div id="https://www.notion.so/72fc6b91964a45b59a82e75cb9becb27" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"><span class="SemanticString">拆包可以用于 </span><span class="SemanticString"><code class="SemanticString__Fragment SemanticString__Fragment--Code">for</code></span><span class="SemanticString"> 循环中的迭代：</span></span></p></div><pre id="https://www.notion.so/830a67f6df52436c8a94a0b18e7dbabf" class="Code"><code><span class="SemanticStringArray"><span class="SemanticString"><span><span class="token comment"># 拆包用于 for 循环中的迭代</span>
data <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">(</span><span class="token string">'Alice'</span><span class="token punctuation">,</span> <span class="token number">25</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token string">'Bob'</span><span class="token punctuation">,</span> <span class="token number">30</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token string">'Charlie'</span><span class="token punctuation">,</span> <span class="token number">35</span><span class="token punctuation">)</span><span class="token punctuation">]</span>

<span class="token keyword">for</span> name<span class="token punctuation">,</span> age <span class="token keyword">in</span> data<span class="token punctuation">:</span>
    <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string-interpolation"><span class="token string">f"</span><span class="token interpolation"><span class="token punctuation">{</span>name<span class="token punctuation">}</span></span><span class="token string"> is </span><span class="token interpolation"><span class="token punctuation">{</span>age<span class="token punctuation">}</span></span><span class="token string"> years old"</span></span><span class="token punctuation">)</span>
</span></span></span></code></pre><h3 id="https://www.notion.so/5ade8e77dcef46e18f0a1ace78f0629e" class="ColorfulBlock ColorfulBlock--ColorDefault Heading Heading--3"><a class="Anchor" href="#https://www.notion.so/5ade8e77dcef46e18f0a1ace78f0629e"><svg width="16" height="16" viewBox="0 0 16 16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a><span class="SemanticStringArray"><span class="SemanticString">使用星号 </span><span class="SemanticString"><code class="SemanticString__Fragment SemanticString__Fragment--Code"></code></span><span class="SemanticString"> 拆包</span></span></h3><div id="https://www.notion.so/059b7178abca44cc825ce9032d7881c0" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"><span class="SemanticString">星号 </span><span class="SemanticString"><code class="SemanticString__Fragment SemanticString__Fragment--Code">*</code></span><span class="SemanticString"> 可以用于从可迭代对象中解包多个值到一个列表中：</span></span></p></div><pre id="https://www.notion.so/810efa14035b453188cec4023999e95f" class="Code"><code><span class="SemanticStringArray"><span class="SemanticString"><span><span class="token comment"># 星号用于拆包</span>
numbers <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">)</span>
a<span class="token punctuation">,</span> <span class="token operator">*</span>b<span class="token punctuation">,</span> c <span class="token operator">=</span> numbers
<span class="token keyword">print</span><span class="token punctuation">(</span>a<span class="token punctuation">)</span>  <span class="token comment"># 输出: 1</span>
<span class="token keyword">print</span><span class="token punctuation">(</span>b<span class="token punctuation">)</span>  <span class="token comment"># 输出: [2, 3, 4]</span>
<span class="token keyword">print</span><span class="token punctuation">(</span>c<span class="token punctuation">)</span>  <span class="token comment"># 输出: 5</span>
</span></span></span></code></pre><h3 id="https://www.notion.so/7eaebd783db045adb42073c8f85c26fa" class="ColorfulBlock ColorfulBlock--ColorDefault Heading Heading--3"><a class="Anchor" href="#https://www.notion.so/7eaebd783db045adb42073c8f85c26fa"><svg width="16" height="16" viewBox="0 0 16 16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a><span class="SemanticStringArray"><span class="SemanticString">在函数调用中使用拆包</span></span></h3><div id="https://www.notion.so/7c06830f7daf4d37bbefd6123c7a9c4e" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"><span class="SemanticString">在函数调用时，可以使用 </span><span class="SemanticString"><code class="SemanticString__Fragment SemanticString__Fragment--Code">*</code></span><span class="SemanticString"> 和 </span><span class="SemanticString"><code class="SemanticString__Fragment SemanticString__Fragment--Code">**</code></span><span class="SemanticString"> 进行参数的拆包：</span></span></p></div><pre id="https://www.notion.so/25f5679e956b43f08710081ec10159eb" class="Code"><code><span class="SemanticStringArray"><span class="SemanticString"><span><span class="token keyword">def</span> <span class="token function">func</span><span class="token punctuation">(</span>a<span class="token punctuation">,</span> b<span class="token punctuation">,</span> c<span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token keyword">print</span><span class="token punctuation">(</span>a<span class="token punctuation">,</span> b<span class="token punctuation">,</span> c<span class="token punctuation">)</span>

<span class="token comment"># 使用 * 进行位置参数的拆包</span>
args <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">)</span>
func<span class="token punctuation">(</span><span class="token operator">*</span>args<span class="token punctuation">)</span>  <span class="token comment"># 输出: 1 2 3</span>

<span class="token comment"># 使用 ** 进行关键字参数的拆包</span>
kwargs <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token string">'a'</span><span class="token punctuation">:</span> <span class="token number">4</span><span class="token punctuation">,</span> <span class="token string">'b'</span><span class="token punctuation">:</span> <span class="token number">5</span><span class="token punctuation">,</span> <span class="token string">'c'</span><span class="token punctuation">:</span> <span class="token number">6</span><span class="token punctuation">}</span>
func<span class="token punctuation">(</span><span class="token operator">**</span>kwargs<span class="token punctuation">)</span>  <span class="token comment"># 输出: 4 5 6</span>
</span></span></span></code></pre><h3 id="https://www.notion.so/e562612dadff47deb2b31bec7e99aa4c" class="ColorfulBlock ColorfulBlock--ColorDefault Heading Heading--3"><a class="Anchor" href="#https://www.notion.so/e562612dadff47deb2b31bec7e99aa4c"><svg width="16" height="16" viewBox="0 0 16 16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a><span class="SemanticStringArray"><span class="SemanticString">总结</span></span></h3><div id="https://www.notion.so/58b37c2a59844dceac44d9de55ac602f" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"><span class="SemanticString">元组拆包是一种强大的特性，使得 Python 代码更加简洁、清晰和易读。它适用于多种场景，如变量赋值、交换变量值、函数返回值处理和迭代等。掌握这一特性能够显著提升代码的质量和编写效率。</span></span></p></div><div id="https://www.notion.so/88b87345f62246e99f95aeb950cedcc7" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"></span></p></div><div id="https://www.notion.so/9fd2d4c410d548b994f0bb7d7029279e" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"><span class="SemanticString"><code class="SemanticString__Fragment SemanticString__Fragment--Code">collections.namedtuple</code></span><span class="SemanticString"> 是 Python 标准库中的一个工厂函数，用于创建一个类似于 </span><span class="SemanticString"><code class="SemanticString__Fragment SemanticString__Fragment--Code">tuple</code></span><span class="SemanticString"> 的对象，但具有字段名称，可以通过属性访问。它在保持 </span><span class="SemanticString"><code class="SemanticString__Fragment SemanticString__Fragment--Code">tuple</code></span><span class="SemanticString"> 不可变特性的同时，增加了可读性和可维护性。</span></span></p></div><h3 id="https://www.notion.so/cef5eea280d84b88b475b27578be11b0" class="ColorfulBlock ColorfulBlock--ColorDefault Heading Heading--3"><a class="Anchor" href="#https://www.notion.so/cef5eea280d84b88b475b27578be11b0"><svg width="16" height="16" viewBox="0 0 16 16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a><span class="SemanticStringArray"><span class="SemanticString">创建 namedtuple</span></span></h3><div id="https://www.notion.so/d7d18090ee734a0d88ce9d9484dd097b" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"><span class="SemanticString">使用 </span><span class="SemanticString"><code class="SemanticString__Fragment SemanticString__Fragment--Code">namedtuple</code></span><span class="SemanticString"> 创建一个新的命名元组类：</span></span></p></div><pre id="https://www.notion.so/4cdbc116e10f4b169117290c5666c8e1" class="Code"><code><span class="SemanticStringArray"><span class="SemanticString"><span><span class="token keyword">from</span> collections <span class="token keyword">import</span> namedtuple

<span class="token comment"># 定义一个 namedtuple 类</span>
Point <span class="token operator">=</span> namedtuple<span class="token punctuation">(</span><span class="token string">'Point'</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token string">'x'</span><span class="token punctuation">,</span> <span class="token string">'y'</span><span class="token punctuation">]</span><span class="token punctuation">)</span>

<span class="token comment"># 创建 namedtuple 实例</span>
p <span class="token operator">=</span> Point<span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">,</span> <span class="token number">20</span><span class="token punctuation">)</span>
</span></span></span></code></pre><h3 id="https://www.notion.so/0e48513b5aab4ca4a6535203352d44ae" class="ColorfulBlock ColorfulBlock--ColorDefault Heading Heading--3"><a class="Anchor" href="#https://www.notion.so/0e48513b5aab4ca4a6535203352d44ae"><svg width="16" height="16" viewBox="0 0 16 16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a><span class="SemanticStringArray"><span class="SemanticString">访问字段</span></span></h3><div id="https://www.notion.so/35b7e3ade7ff48a5809dc0af09d84398" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"><span class="SemanticString">可以通过属性名称访问字段：</span></span></p></div><pre id="https://www.notion.so/798e0b281a2e4456b6211435c3934f0f" class="Code"><code><span class="SemanticStringArray"><span class="SemanticString"><span><span class="token keyword">print</span><span class="token punctuation">(</span>p<span class="token punctuation">.</span>x<span class="token punctuation">)</span>  <span class="token comment"># 输出: 10</span>
<span class="token keyword">print</span><span class="token punctuation">(</span>p<span class="token punctuation">.</span>y<span class="token punctuation">)</span>  <span class="token comment"># 输出: 20</span>
</span></span></span></code></pre><h3 id="https://www.notion.so/5a373ce5726b443e9c8aec727063d6b3" class="ColorfulBlock ColorfulBlock--ColorDefault Heading Heading--3"><a class="Anchor" href="#https://www.notion.so/5a373ce5726b443e9c8aec727063d6b3"><svg width="16" height="16" viewBox="0 0 16 16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a><span class="SemanticStringArray"><span class="SemanticString">常用方法和属性</span></span></h3><ol class="NumberedListWrapper"><li id="https://www.notion.so/465c19deeb454ff3b8fd786152986c39" class="NumberedList" value="1"><span class="SemanticStringArray"><span class="SemanticString"><strong class="SemanticString__Fragment SemanticString__Fragment--Bold">_fields</strong></span><span class="SemanticString">：返回字段名称的元组。</span></span><pre id="https://www.notion.so/623bec403e464e88ba9d9f06ebe8b422" class="Code"><code><span class="SemanticStringArray"><span class="SemanticString"><span><span class="token keyword">print</span><span class="token punctuation">(</span>Point<span class="token punctuation">.</span>_fields<span class="token punctuation">)</span>  <span class="token comment"># 输出: ('x', 'y')</span>
</span></span></span></code></pre></li><li id="https://www.notion.so/45696ec9001d4b9cadecf3395ffe4a55" class="NumberedList" value="2"><span class="SemanticStringArray"><span class="SemanticString"><strong class="SemanticString__Fragment SemanticString__Fragment--Bold">_replace</strong></span><span class="SemanticString">：返回一个新的 namedtuple 实例，可以指定某些字段的新值。</span></span><pre id="https://www.notion.so/70e99417b8a54bc3ac47139613e5b009" class="Code"><code><span class="SemanticStringArray"><span class="SemanticString"><span>p2 <span class="token operator">=</span> p<span class="token punctuation">.</span>_replace<span class="token punctuation">(</span>x<span class="token operator">=</span><span class="token number">15</span><span class="token punctuation">)</span>
<span class="token keyword">print</span><span class="token punctuation">(</span>p2<span class="token punctuation">)</span>  <span class="token comment"># 输出: Point(x=15, y=20)</span>
</span></span></span></code></pre></li><li id="https://www.notion.so/f67df34eeb164977bb50bb7f5af61f1c" class="NumberedList" value="3"><span class="SemanticStringArray"><span class="SemanticString"><strong class="SemanticString__Fragment SemanticString__Fragment--Bold">_asdict</strong></span><span class="SemanticString">：将 namedtuple 转换为字典。</span></span><pre id="https://www.notion.so/868a7103704341c59ab114abcf58071a" class="Code"><code><span class="SemanticStringArray"><span class="SemanticString"><span>p_dict <span class="token operator">=</span> p<span class="token punctuation">.</span>_asdict<span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token keyword">print</span><span class="token punctuation">(</span>p_dict<span class="token punctuation">)</span>  <span class="token comment"># 输出: {'x': 10, 'y': 20}</span>
</span></span></span></code></pre></li><li id="https://www.notion.so/6ba153effcaf41ab815523ab90d1dcc6" class="NumberedList" value="4"><span class="SemanticStringArray"><span class="SemanticString"><strong class="SemanticString__Fragment SemanticString__Fragment--Bold">_make</strong></span><span class="SemanticString">：从一个序列创建 namedtuple 实例。</span></span><pre id="https://www.notion.so/e37469f676424e2490c004df11e8099b" class="Code"><code><span class="SemanticStringArray"><span class="SemanticString"><span>p3 <span class="token operator">=</span> Point<span class="token punctuation">.</span>_make<span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token number">30</span><span class="token punctuation">,</span> <span class="token number">40</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
<span class="token keyword">print</span><span class="token punctuation">(</span>p3<span class="token punctuation">)</span>  <span class="token comment"># 输出: Point(x=30, y=40)</span>
</span></span></span></code></pre></li></ol><h3 id="https://www.notion.so/8408897c75b5414598485148eb50dd6f" class="ColorfulBlock ColorfulBlock--ColorDefault Heading Heading--3"><a class="Anchor" href="#https://www.notion.so/8408897c75b5414598485148eb50dd6f"><svg width="16" height="16" viewBox="0 0 16 16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a><span class="SemanticStringArray"><span class="SemanticString">完整示例</span></span></h3><pre id="https://www.notion.so/d8aef9fcf43e48da99af4fcfab01ca1c" class="Code"><code><span class="SemanticStringArray"><span class="SemanticString"><span><span class="token keyword">from</span> collections <span class="token keyword">import</span> namedtuple

<span class="token comment"># 定义 namedtuple 类</span>
Person <span class="token operator">=</span> namedtuple<span class="token punctuation">(</span><span class="token string">'Person'</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token string">'name'</span><span class="token punctuation">,</span> <span class="token string">'age'</span><span class="token punctuation">,</span> <span class="token string">'gender'</span><span class="token punctuation">]</span><span class="token punctuation">)</span>

<span class="token comment"># 创建 namedtuple 实例</span>
person <span class="token operator">=</span> Person<span class="token punctuation">(</span><span class="token string">'Alice'</span><span class="token punctuation">,</span> <span class="token number">30</span><span class="token punctuation">,</span> <span class="token string">'F'</span><span class="token punctuation">)</span>

<span class="token comment"># 访问字段</span>
<span class="token keyword">print</span><span class="token punctuation">(</span>person<span class="token punctuation">.</span>name<span class="token punctuation">)</span>  <span class="token comment"># 输出: Alice</span>
<span class="token keyword">print</span><span class="token punctuation">(</span>person<span class="token punctuation">.</span>age<span class="token punctuation">)</span>   <span class="token comment"># 输出: 30</span>
<span class="token keyword">print</span><span class="token punctuation">(</span>person<span class="token punctuation">.</span>gender<span class="token punctuation">)</span>  <span class="token comment"># 输出: F</span>

<span class="token comment"># 使用 _replace 方法</span>
person2 <span class="token operator">=</span> person<span class="token punctuation">.</span>_replace<span class="token punctuation">(</span>age<span class="token operator">=</span><span class="token number">31</span><span class="token punctuation">)</span>
<span class="token keyword">print</span><span class="token punctuation">(</span>person2<span class="token punctuation">)</span>  <span class="token comment"># 输出: Person(name='Alice', age=31, gender='F')</span>

<span class="token comment"># 转换为字典</span>
person_dict <span class="token operator">=</span> person<span class="token punctuation">.</span>_asdict<span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token keyword">print</span><span class="token punctuation">(</span>person_dict<span class="token punctuation">)</span>  <span class="token comment"># 输出: {'name': 'Alice', 'age': 30, 'gender': 'F'}</span>

<span class="token comment"># 从序列创建 namedtuple 实例</span>
person3 <span class="token operator">=</span> Person<span class="token punctuation">.</span>_make<span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token string">'Bob'</span><span class="token punctuation">,</span> <span class="token number">25</span><span class="token punctuation">,</span> <span class="token string">'M'</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
<span class="token keyword">print</span><span class="token punctuation">(</span>person3<span class="token punctuation">)</span>  <span class="token comment"># 输出: Person(name='Bob', age=25, gender='M')</span>
</span></span></span></code></pre><div id="https://www.notion.so/02f1eeccd8b54037991f443a9cede91b" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"><span class="SemanticString"><code class="SemanticString__Fragment SemanticString__Fragment--Code">namedtuple</code></span><span class="SemanticString"> 是一种非常有用的数据结构，特别是在需要可读性和代码清晰度时。通过使用命名字段，代码变得更易于理解和维护。</span></span></p></div><div id="https://www.notion.so/b1148945eef3446e8817be7bb7798499" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"></span></p></div><div id="https://www.notion.so/b5f9decf87ed4016b0dc1cfa92ccbab2" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"><span class="SemanticString">在Python中，内置函数 </span><span class="SemanticString"><code class="SemanticString__Fragment SemanticString__Fragment--Code">callable()</code></span><span class="SemanticString"> 用于检查对象是否是“可调用的”。如果对象是可以调用的（即可以使用圆括号 </span><span class="SemanticString"><code class="SemanticString__Fragment SemanticString__Fragment--Code">()</code></span><span class="SemanticString"> 进行调用，比如函数、方法、类等），则返回 </span><span class="SemanticString"><code class="SemanticString__Fragment SemanticString__Fragment--Code">True</code></span><span class="SemanticString">，否则返回 </span><span class="SemanticString"><code class="SemanticString__Fragment SemanticString__Fragment--Code">False</code></span><span class="SemanticString">。</span></span></p></div><h3 id="https://www.notion.so/c4e03ad7462842be8add32e6bebc404e" class="ColorfulBlock ColorfulBlock--ColorDefault Heading Heading--3"><a class="Anchor" href="#https://www.notion.so/c4e03ad7462842be8add32e6bebc404e"><svg width="16" height="16" viewBox="0 0 16 16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a><span class="SemanticStringArray"><span class="SemanticString">使用示例</span></span></h3><pre id="https://www.notion.so/bb818abe3c024c7a9c2101cd2ba30c5f" class="Code"><code><span class="SemanticStringArray"><span class="SemanticString"><span><span class="token comment"># 定义一个普通函数</span>
<span class="token keyword">def</span> <span class="token function">my_function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token keyword">pass</span>

<span class="token comment"># 定义一个类</span>
<span class="token keyword">class</span> <span class="token class-name">MyClass</span><span class="token punctuation">:</span>
    <span class="token keyword">def</span> <span class="token function">__call__</span><span class="token punctuation">(</span>self<span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token keyword">pass</span>

<span class="token comment"># 创建类的实例</span>
my_instance <span class="token operator">=</span> MyClass<span class="token punctuation">(</span><span class="token punctuation">)</span>

<span class="token comment"># 检查对象是否可调用</span>
<span class="token keyword">print</span><span class="token punctuation">(</span><span class="token builtin">callable</span><span class="token punctuation">(</span>my_function<span class="token punctuation">)</span><span class="token punctuation">)</span>    <span class="token comment"># 输出: True</span>
<span class="token keyword">print</span><span class="token punctuation">(</span><span class="token builtin">callable</span><span class="token punctuation">(</span>MyClass<span class="token punctuation">)</span><span class="token punctuation">)</span>        <span class="token comment"># 输出: True</span>
<span class="token keyword">print</span><span class="token punctuation">(</span><span class="token builtin">callable</span><span class="token punctuation">(</span>my_instance<span class="token punctuation">)</span><span class="token punctuation">)</span>    <span class="token comment"># 输出: True</span>
<span class="token keyword">print</span><span class="token punctuation">(</span><span class="token builtin">callable</span><span class="token punctuation">(</span><span class="token number">42</span><span class="token punctuation">)</span><span class="token punctuation">)</span>             <span class="token comment"># 输出: False</span>
<span class="token keyword">print</span><span class="token punctuation">(</span><span class="token builtin">callable</span><span class="token punctuation">(</span><span class="token string">"hello"</span><span class="token punctuation">)</span><span class="token punctuation">)</span>        <span class="token comment"># 输出: False</span>
<span class="token keyword">print</span><span class="token punctuation">(</span><span class="token builtin">callable</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">)</span>      <span class="token comment"># 输出: False</span>
</span></span></span></code></pre><h3 id="https://www.notion.so/ec84ec4d252648d2a03b9f2432cd9002" class="ColorfulBlock ColorfulBlock--ColorDefault Heading Heading--3"><a class="Anchor" href="#https://www.notion.so/ec84ec4d252648d2a03b9f2432cd9002"><svg width="16" height="16" viewBox="0 0 16 16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a><span class="SemanticStringArray"><span class="SemanticString">解释</span></span></h3><ol class="NumberedListWrapper"><li id="https://www.notion.so/1a35f45833fe4645babe88a847d22f70" class="NumberedList" value="1"><span class="SemanticStringArray"><span class="SemanticString"><strong class="SemanticString__Fragment SemanticString__Fragment--Bold">函数</strong></span><span class="SemanticString">：普通函数是可调用的，所以 </span><span class="SemanticString"><code class="SemanticString__Fragment SemanticString__Fragment--Code">callable(my_function)</code></span><span class="SemanticString"> 返回 </span><span class="SemanticString"><code class="SemanticString__Fragment SemanticString__Fragment--Code">True</code></span><span class="SemanticString">。</span></span></li><li id="https://www.notion.so/8bb278f592bd42e8846212d40fa16b56" class="NumberedList" value="2"><span class="SemanticStringArray"><span class="SemanticString"><strong class="SemanticString__Fragment SemanticString__Fragment--Bold">类</strong></span><span class="SemanticString">：类本身是可调用的（因为可以实例化），所以 </span><span class="SemanticString"><code class="SemanticString__Fragment SemanticString__Fragment--Code">callable(MyClass)</code></span><span class="SemanticString"> 返回 </span><span class="SemanticString"><code class="SemanticString__Fragment SemanticString__Fragment--Code">True</code></span><span class="SemanticString">。</span></span></li><li id="https://www.notion.so/25a03f3643ba4ebcbd996720669863c5" class="NumberedList" value="3"><span class="SemanticStringArray"><span class="SemanticString"><strong class="SemanticString__Fragment SemanticString__Fragment--Bold">类实例</strong></span><span class="SemanticString">：如果类定义了 </span><span class="SemanticString"><code class="SemanticString__Fragment SemanticString__Fragment--Code">__call__</code></span><span class="SemanticString"> 方法，那么类的实例也是可调用的，所以 </span><span class="SemanticString"><code class="SemanticString__Fragment SemanticString__Fragment--Code">callable(my_instance)</code></span><span class="SemanticString"> 返回 </span><span class="SemanticString"><code class="SemanticString__Fragment SemanticString__Fragment--Code">True</code></span><span class="SemanticString">。</span></span></li><li id="https://www.notion.so/d2baba3def4e44ac805452e26750e87f" class="NumberedList" value="4"><span class="SemanticStringArray"><span class="SemanticString"><strong class="SemanticString__Fragment SemanticString__Fragment--Bold">其他对象</strong></span><span class="SemanticString">：普通的整数、字符串、列表等对象不是可调用的，所以 </span><span class="SemanticString"><code class="SemanticString__Fragment SemanticString__Fragment--Code">callable(42)</code></span><span class="SemanticString">、</span><span class="SemanticString"><code class="SemanticString__Fragment SemanticString__Fragment--Code">callable(&quot;hello&quot;)</code></span><span class="SemanticString"> 和 </span><span class="SemanticString"><code class="SemanticString__Fragment SemanticString__Fragment--Code">callable([1, 2, 3])</code></span><span class="SemanticString"> 都返回 </span><span class="SemanticString"><code class="SemanticString__Fragment SemanticString__Fragment--Code">False</code></span><span class="SemanticString">。</span></span></li></ol><h3 id="https://www.notion.so/3c329f1551eb4ef783f91da9508fd865" class="ColorfulBlock ColorfulBlock--ColorDefault Heading Heading--3"><a class="Anchor" href="#https://www.notion.so/3c329f1551eb4ef783f91da9508fd865"><svg width="16" height="16" viewBox="0 0 16 16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a><span class="SemanticStringArray"><span class="SemanticString"><code class="SemanticString__Fragment SemanticString__Fragment--Code">__call__</code></span><span class="SemanticString"> 方法</span></span></h3><div id="https://www.notion.so/c63326f3bc0f438791305091fd4a81a4" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"><span class="SemanticString">如果你希望你的类的实例变得可调用，可以定义 </span><span class="SemanticString"><code class="SemanticString__Fragment SemanticString__Fragment--Code">__call__</code></span><span class="SemanticString"> 方法：</span></span></p></div><pre id="https://www.notion.so/0b62481c5a664cf2844b92d6bb160f8a" class="Code"><code><span class="SemanticStringArray"><span class="SemanticString"><span><span class="token keyword">class</span> <span class="token class-name">MyCallableClass</span><span class="token punctuation">:</span>
    <span class="token keyword">def</span> <span class="token function">__call__</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> <span class="token operator">*</span>args<span class="token punctuation">,</span> <span class="token operator">**</span>kwargs<span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">"Instance called"</span><span class="token punctuation">)</span>

<span class="token comment"># 创建类的实例</span>
my_callable_instance <span class="token operator">=</span> MyCallableClass<span class="token punctuation">(</span><span class="token punctuation">)</span>

<span class="token comment"># 检查实例是否可调用</span>
<span class="token keyword">print</span><span class="token punctuation">(</span><span class="token builtin">callable</span><span class="token punctuation">(</span>my_callable_instance<span class="token punctuation">)</span><span class="token punctuation">)</span>  <span class="token comment"># 输出: True</span>

<span class="token comment"># 调用实例</span>
my_callable_instance<span class="token punctuation">(</span><span class="token punctuation">)</span>  <span class="token comment"># 输出: Instance called</span>
</span></span></span></code></pre><h3 id="https://www.notion.so/926b574aadab4058ab8f97e5064fb3d1" class="ColorfulBlock ColorfulBlock--ColorDefault Heading Heading--3"><a class="Anchor" href="#https://www.notion.so/926b574aadab4058ab8f97e5064fb3d1"><svg width="16" height="16" viewBox="0 0 16 16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a><span class="SemanticStringArray"><span class="SemanticString">小结</span></span></h3><ul class="BulletedListWrapper"><li id="https://www.notion.so/b1a0968c5609416093478d133cea76fb" class="BulletedList"><span class="SemanticStringArray"><span class="SemanticString"><code class="SemanticString__Fragment SemanticString__Fragment--Code">callable()</code></span><span class="SemanticString"> 是一个简单但有用的函数，用于检查对象是否是可调用的。</span></span></li><li id="https://www.notion.so/29b61f2a0a484fd7a53328710cfa9841" class="BulletedList"><span class="SemanticStringArray"><span class="SemanticString">函数、方法、类和实现了 </span><span class="SemanticString"><code class="SemanticString__Fragment SemanticString__Fragment--Code">__call__</code></span><span class="SemanticString"> 方法的实例都是可调用的。</span></span></li><li id="https://www.notion.so/ac32b185b4e14fc285647f75ed60f6d0" class="BulletedList"><span class="SemanticStringArray"><span class="SemanticString">使用 </span><span class="SemanticString"><code class="SemanticString__Fragment SemanticString__Fragment--Code">callable()</code></span><span class="SemanticString"> 可以提高代码的灵活性和安全性，确保对象在被调用之前确实是可调用的。</span></span></li></ul><div id="https://www.notion.so/8b5c4d7e025b4a538fe6a3528e7a1c31" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"></span></p></div><div id="https://www.notion.so/5cf1662afa9b4d50ad1b8fe28ed07372" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"></span></p></div><div id="https://www.notion.so/65b746425342422dac077d5c7d48be28" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"><span class="SemanticString">了解了！在 Python 中，</span><span class="SemanticString"><code class="SemanticString__Fragment SemanticString__Fragment--Code">__defaults__</code></span><span class="SemanticString">、</span><span class="SemanticString"><code class="SemanticString__Fragment SemanticString__Fragment--Code">__code__</code></span><span class="SemanticString"> 和 </span><span class="SemanticString"><code class="SemanticString__Fragment SemanticString__Fragment--Code">__annotations__</code></span><span class="SemanticString"> 是函数对象的特殊属性，它们提供了有关函数的各种信息。</span></span></p></div><h3 id="https://www.notion.so/3ecbf5f07dc14b2ca8c886fd3a634a8d" class="ColorfulBlock ColorfulBlock--ColorDefault Heading Heading--3"><a class="Anchor" href="#https://www.notion.so/3ecbf5f07dc14b2ca8c886fd3a634a8d"><svg width="16" height="16" viewBox="0 0 16 16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a><span class="SemanticStringArray"><span class="SemanticString">1. </span><span class="SemanticString"><code class="SemanticString__Fragment SemanticString__Fragment--Code">__defaults__</code></span></span></h3><div id="https://www.notion.so/93cfc349b6b44a30bb5cc84799a1a238" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"><span class="SemanticString"><code class="SemanticString__Fragment SemanticString__Fragment--Code">__defaults__</code></span><span class="SemanticString"> 是一个元组，包含函数的默认参数值（如果有）。如果函数定义了默认参数，则 </span><span class="SemanticString"><code class="SemanticString__Fragment SemanticString__Fragment--Code">__defaults__</code></span><span class="SemanticString"> 属性将包含这些默认参数的值；否则，它将为 </span><span class="SemanticString"><code class="SemanticString__Fragment SemanticString__Fragment--Code">None</code></span><span class="SemanticString">。</span></span></p></div><pre id="https://www.notion.so/a316966eddc34ab9bbf5b9ff380f5e5a" class="Code"><code><span class="SemanticStringArray"><span class="SemanticString"><span><span class="token keyword">def</span> <span class="token function">my_function</span><span class="token punctuation">(</span>a<span class="token punctuation">,</span> b<span class="token operator">=</span><span class="token number">2</span><span class="token punctuation">,</span> c<span class="token operator">=</span><span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token keyword">pass</span>

<span class="token keyword">print</span><span class="token punctuation">(</span>my_function<span class="token punctuation">.</span>__defaults__<span class="token punctuation">)</span>  <span class="token comment"># 输出: (2, 3)</span>
</span></span></span></code></pre><h3 id="https://www.notion.so/9ac2658ea790410d988f7b93e136caec" class="ColorfulBlock ColorfulBlock--ColorDefault Heading Heading--3"><a class="Anchor" href="#https://www.notion.so/9ac2658ea790410d988f7b93e136caec"><svg width="16" height="16" viewBox="0 0 16 16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a><span class="SemanticStringArray"><span class="SemanticString">2. </span><span class="SemanticString"><code class="SemanticString__Fragment SemanticString__Fragment--Code">__code__</code></span></span></h3><div id="https://www.notion.so/1fc48eba0e4d41038d484af47e4751ef" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"><span class="SemanticString"><code class="SemanticString__Fragment SemanticString__Fragment--Code">__code__</code></span><span class="SemanticString"> 是一个代码对象，包含函数的字节码、常量、变量和其他与函数实现相关的信息。通过访问 </span><span class="SemanticString"><code class="SemanticString__Fragment SemanticString__Fragment--Code">__code__</code></span><span class="SemanticString"> 属性，可以获取函数的字节码、局部变量、参数等信息。</span></span></p></div><pre id="https://www.notion.so/ff013af6eb834dfca0ed1706ba5930da" class="Code"><code><span class="SemanticStringArray"><span class="SemanticString"><span><span class="token keyword">def</span> <span class="token function">my_function</span><span class="token punctuation">(</span>a<span class="token punctuation">,</span> b<span class="token operator">=</span><span class="token number">2</span><span class="token punctuation">,</span> c<span class="token operator">=</span><span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
    x <span class="token operator">=</span> <span class="token number">10</span>
    <span class="token keyword">return</span> a <span class="token operator">+</span> b <span class="token operator">+</span> c <span class="token operator">+</span> x

<span class="token keyword">print</span><span class="token punctuation">(</span>my_function<span class="token punctuation">.</span>__code__<span class="token punctuation">.</span>co_varnames<span class="token punctuation">)</span>  <span class="token comment"># 输出: ('a', 'b', 'c', 'x')</span>
<span class="token keyword">print</span><span class="token punctuation">(</span>my_function<span class="token punctuation">.</span>__code__<span class="token punctuation">.</span>co_argcount<span class="token punctuation">)</span>  <span class="token comment"># 输出: 3</span>
</span></span></span></code></pre><h3 id="https://www.notion.so/1b14130d0a9f46168ee033b2272d1146" class="ColorfulBlock ColorfulBlock--ColorDefault Heading Heading--3"><a class="Anchor" href="#https://www.notion.so/1b14130d0a9f46168ee033b2272d1146"><svg width="16" height="16" viewBox="0 0 16 16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a><span class="SemanticStringArray"><span class="SemanticString">3. </span><span class="SemanticString"><code class="SemanticString__Fragment SemanticString__Fragment--Code">__annotations__</code></span></span></h3><div id="https://www.notion.so/497fd604b95d4a44a19f06dc261e2343" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"><span class="SemanticString"><code class="SemanticString__Fragment SemanticString__Fragment--Code">__annotations__</code></span><span class="SemanticString"> 是一个字典，包含函数参数和返回值的类型注解（如果有）。键是参数名或 </span><span class="SemanticString"><code class="SemanticString__Fragment SemanticString__Fragment--Code">&#x27;return&#x27;</code></span><span class="SemanticString">，值是相应的类型注解。</span></span></p></div><pre id="https://www.notion.so/33f1c5045e364a6490d255f511ed95b9" class="Code"><code><span class="SemanticStringArray"><span class="SemanticString"><span><span class="token keyword">def</span> <span class="token function">my_function</span><span class="token punctuation">(</span>a<span class="token punctuation">:</span> <span class="token builtin">int</span><span class="token punctuation">,</span> b<span class="token punctuation">:</span> <span class="token builtin">float</span><span class="token punctuation">)</span> <span class="token operator">-</span><span class="token operator">></span> <span class="token builtin">float</span><span class="token punctuation">:</span>
    <span class="token keyword">return</span> a <span class="token operator">+</span> b

<span class="token keyword">print</span><span class="token punctuation">(</span>my_function<span class="token punctuation">.</span>__annotations__<span class="token punctuation">)</span>  <span class="token comment"># 输出: {'a': &lt;class 'int'>, 'b': &lt;class 'float'>, 'return': &lt;class 'float'>}</span>
</span></span></span></code></pre><h3 id="https://www.notion.so/1c98e55b45b0441dabf7a1c345fa53f7" class="ColorfulBlock ColorfulBlock--ColorDefault Heading Heading--3"><a class="Anchor" href="#https://www.notion.so/1c98e55b45b0441dabf7a1c345fa53f7"><svg width="16" height="16" viewBox="0 0 16 16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a><span class="SemanticStringArray"><span class="SemanticString">使用注意事项</span></span></h3><ul class="BulletedListWrapper"><li id="https://www.notion.so/56a632d2a78548aa8dcc9945e2ec83bf" class="BulletedList"><span class="SemanticStringArray"><span class="SemanticString">这些属性通常用于元编程、调试或特定场景下的高级功能。</span></span></li><li id="https://www.notion.so/35af252aaa3c42a697581946eb2dfa5e" class="BulletedList"><span class="SemanticStringArray"><span class="SemanticString">在一般情况下，不建议直接访问或修改这些属性，而是使用 Python 的标准函数和语法。</span></span></li></ul><div id="https://www.notion.so/6882c224e6124621a7a64b873c762afd" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"><span class="SemanticString">通过这些属性，你可以获取有关函数的各种详细信息，从而实现更高级的功能和调试技巧。</span></span></p></div><div id="https://www.notion.so/4a86adcf6c8a47ebb299e5a1fa5cb70b" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"></span></p></div><div id="https://www.notion.so/4fdfa63c0f5645f8a13818bfc37d816c" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"></span></p></div><div id="https://www.notion.so/d1d5bf7a0ab8418b8808fc2b9ece45dd" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"></span></p></div><div id="https://www.notion.so/ac241a4fc18c4697a032d69d23670503" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"><span class="SemanticString">可是，在循环中，else的语义恰好相反：“运行这个循环，然后做那件事。”因此，使用then关键字更好。</span></span></p></div><div id="https://www.notion.so/8de8a3925ed8422e921df8471bac6712" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"></span></p></div><div id="https://www.notion.so/28f7416bf4194f6281aeaab0bf5c2f64" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"><span class="SemanticString">在 Python 中，</span><span class="SemanticString"><code class="SemanticString__Fragment SemanticString__Fragment--Code">for/else</code></span><span class="SemanticString">、</span><span class="SemanticString"><code class="SemanticString__Fragment SemanticString__Fragment--Code">while/else</code></span><span class="SemanticString"> 和 </span><span class="SemanticString"><code class="SemanticString__Fragment SemanticString__Fragment--Code">try/else</code></span><span class="SemanticString"> 结构提供了一种特定的控制流，与 </span><span class="SemanticString"><code class="SemanticString__Fragment SemanticString__Fragment--Code">if/else</code></span><span class="SemanticString"> 结构有显著不同。下面是这些结构的详细解释及其区别。</span></span></p></div><h3 id="https://www.notion.so/8771f785f97048938004baab02c7a07c" class="ColorfulBlock ColorfulBlock--ColorDefault Heading Heading--3"><a class="Anchor" href="#https://www.notion.so/8771f785f97048938004baab02c7a07c"><svg width="16" height="16" viewBox="0 0 16 16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a><span class="SemanticStringArray"><span class="SemanticString">for/else 和 while/else</span></span></h3><div id="https://www.notion.so/003e082cc4ad49b794630a207ca17cc9" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"><span class="SemanticString">在 </span><span class="SemanticString"><code class="SemanticString__Fragment SemanticString__Fragment--Code">for</code></span><span class="SemanticString"> 和 </span><span class="SemanticString"><code class="SemanticString__Fragment SemanticString__Fragment--Code">while</code></span><span class="SemanticString"> 循环中，</span><span class="SemanticString"><code class="SemanticString__Fragment SemanticString__Fragment--Code">else</code></span><span class="SemanticString"> 子句的语义是当循环正常完成时（即没有遇到 </span><span class="SemanticString"><code class="SemanticString__Fragment SemanticString__Fragment--Code">break</code></span><span class="SemanticString"> 语句中断循环）执行 </span><span class="SemanticString"><code class="SemanticString__Fragment SemanticString__Fragment--Code">else</code></span><span class="SemanticString"> 块中的代码。简单来说，如果循环没有被 </span><span class="SemanticString"><code class="SemanticString__Fragment SemanticString__Fragment--Code">break</code></span><span class="SemanticString"> 打断，</span><span class="SemanticString"><code class="SemanticString__Fragment SemanticString__Fragment--Code">else</code></span><span class="SemanticString"> 子句就会执行。</span></span></p></div><h3 id="https://www.notion.so/4814b32ab69b4f3ebc7fa55a76abfc4c" class="ColorfulBlock ColorfulBlock--ColorDefault Heading Heading--3"><a class="Anchor" href="#https://www.notion.so/4814b32ab69b4f3ebc7fa55a76abfc4c"><svg width="16" height="16" viewBox="0 0 16 16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a><span class="SemanticStringArray"><span class="SemanticString">for/else 示例</span></span></h3><pre id="https://www.notion.so/ebc9a4c195f84401af500cd1a4f26c72" class="Code"><code><span class="SemanticStringArray"><span class="SemanticString"><span><span class="token keyword">for</span> i <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span><span class="token number">5</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token keyword">if</span> i <span class="token operator">==</span> <span class="token number">3</span><span class="token punctuation">:</span>
        <span class="token keyword">break</span>
<span class="token keyword">else</span><span class="token punctuation">:</span>
    <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">"循环正常结束，没有遇到 break。"</span><span class="token punctuation">)</span>

<span class="token comment"># 这个示例中，for 循环在 i 等于 3 时被中断，所以 else 块不会执行。</span>
</span></span></span></code></pre><h3 id="https://www.notion.so/2d528326cbb846959415f325037df3b3" class="ColorfulBlock ColorfulBlock--ColorDefault Heading Heading--3"><a class="Anchor" href="#https://www.notion.so/2d528326cbb846959415f325037df3b3"><svg width="16" height="16" viewBox="0 0 16 16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a><span class="SemanticStringArray"><span class="SemanticString">while/else 示例</span></span></h3><pre id="https://www.notion.so/29d7153b3cac494cbf552ca2ff1b0ba7" class="Code"><code><span class="SemanticStringArray"><span class="SemanticString"><span>n <span class="token operator">=</span> <span class="token number">5</span>
<span class="token keyword">while</span> n <span class="token operator">></span> <span class="token number">0</span><span class="token punctuation">:</span>
    n <span class="token operator">-=</span> <span class="token number">1</span>
    <span class="token keyword">if</span> n <span class="token operator">==</span> <span class="token number">2</span><span class="token punctuation">:</span>
        <span class="token keyword">break</span>
<span class="token keyword">else</span><span class="token punctuation">:</span>
    <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">"循环正常结束，没有遇到 break。"</span><span class="token punctuation">)</span>

<span class="token comment"># 这个示例中，while 循环在 n 等于 2 时被中断，所以 else 块不会执行。</span>
</span></span></span></code></pre><h3 id="https://www.notion.so/066a2221cdc14f41a412e4a069865f8a" class="ColorfulBlock ColorfulBlock--ColorDefault Heading Heading--3"><a class="Anchor" href="#https://www.notion.so/066a2221cdc14f41a412e4a069865f8a"><svg width="16" height="16" viewBox="0 0 16 16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a><span class="SemanticStringArray"><span class="SemanticString">try/else</span></span></h3><div id="https://www.notion.so/1e80daf66fb648be90a43f3727b4801e" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"><span class="SemanticString">在 </span><span class="SemanticString"><code class="SemanticString__Fragment SemanticString__Fragment--Code">try</code></span><span class="SemanticString"> 结构中，</span><span class="SemanticString"><code class="SemanticString__Fragment SemanticString__Fragment--Code">else</code></span><span class="SemanticString"> 子句的语义是只有在 </span><span class="SemanticString"><code class="SemanticString__Fragment SemanticString__Fragment--Code">try</code></span><span class="SemanticString"> 块中没有发生任何异常时才会执行 </span><span class="SemanticString"><code class="SemanticString__Fragment SemanticString__Fragment--Code">else</code></span><span class="SemanticString"> 块中的代码。如果 </span><span class="SemanticString"><code class="SemanticString__Fragment SemanticString__Fragment--Code">try</code></span><span class="SemanticString"> 块中发生了异常，则会跳过 </span><span class="SemanticString"><code class="SemanticString__Fragment SemanticString__Fragment--Code">else</code></span><span class="SemanticString"> 块，直接执行 </span><span class="SemanticString"><code class="SemanticString__Fragment SemanticString__Fragment--Code">except</code></span><span class="SemanticString"> 块（如果有的话），或者继续向外传播异常。</span></span></p></div><h3 id="https://www.notion.so/d1a0a1afee0b47fd8edc0850c8648f71" class="ColorfulBlock ColorfulBlock--ColorDefault Heading Heading--3"><a class="Anchor" href="#https://www.notion.so/d1a0a1afee0b47fd8edc0850c8648f71"><svg width="16" height="16" viewBox="0 0 16 16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a><span class="SemanticStringArray"><span class="SemanticString">try/else 示例</span></span></h3><pre id="https://www.notion.so/dc0b880f22064c01ba016c1c827a798b" class="Code"><code><span class="SemanticStringArray"><span class="SemanticString"><span><span class="token keyword">try</span><span class="token punctuation">:</span>
    result <span class="token operator">=</span> <span class="token number">10</span> <span class="token operator">/</span> <span class="token number">2</span>
<span class="token keyword">except</span> ZeroDivisionError<span class="token punctuation">:</span>
    <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">"捕获到除以零的异常。"</span><span class="token punctuation">)</span>
<span class="token keyword">else</span><span class="token punctuation">:</span>
    <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">"没有异常，结果是："</span><span class="token punctuation">,</span> result<span class="token punctuation">)</span>

<span class="token comment"># 这个示例中，try 块中的代码没有抛出异常，所以 else 块会执行。</span>
</span></span></span></code></pre><h3 id="https://www.notion.so/03cde1ffc0c3493fbf1a6e4ee6398e27" class="ColorfulBlock ColorfulBlock--ColorDefault Heading Heading--3"><a class="Anchor" href="#https://www.notion.so/03cde1ffc0c3493fbf1a6e4ee6398e27"><svg width="16" height="16" viewBox="0 0 16 16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a><span class="SemanticStringArray"><span class="SemanticString">if/else</span></span></h3><div id="https://www.notion.so/9f4aaade071c413481275750fc3229d8" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"><span class="SemanticString">在 </span><span class="SemanticString"><code class="SemanticString__Fragment SemanticString__Fragment--Code">if</code></span><span class="SemanticString"> 结构中，</span><span class="SemanticString"><code class="SemanticString__Fragment SemanticString__Fragment--Code">else</code></span><span class="SemanticString"> 子句的语义是当 </span><span class="SemanticString"><code class="SemanticString__Fragment SemanticString__Fragment--Code">if</code></span><span class="SemanticString"> 条件不满足时执行 </span><span class="SemanticString"><code class="SemanticString__Fragment SemanticString__Fragment--Code">else</code></span><span class="SemanticString"> 块中的代码。这与上面的结构不同，因为 </span><span class="SemanticString"><code class="SemanticString__Fragment SemanticString__Fragment--Code">if/else</code></span><span class="SemanticString"> 是条件判断，而不是控制流管理。</span></span></p></div><h3 id="https://www.notion.so/d883b1be23764b59b6cb705d8efdb73d" class="ColorfulBlock ColorfulBlock--ColorDefault Heading Heading--3"><a class="Anchor" href="#https://www.notion.so/d883b1be23764b59b6cb705d8efdb73d"><svg width="16" height="16" viewBox="0 0 16 16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a><span class="SemanticStringArray"><span class="SemanticString">if/else 示例</span></span></h3><pre id="https://www.notion.so/1d492580dd6d49e594d9321399ea69db" class="Code"><code><span class="SemanticStringArray"><span class="SemanticString"><span>x <span class="token operator">=</span> <span class="token number">10</span>
<span class="token keyword">if</span> x <span class="token operator">></span> <span class="token number">5</span><span class="token punctuation">:</span>
    <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">"x 大于 5"</span><span class="token punctuation">)</span>
<span class="token keyword">else</span><span class="token punctuation">:</span>
    <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">"x 小于或等于 5"</span><span class="token punctuation">)</span>

<span class="token comment"># 这个示例中，如果条件 x > 5 成立，则执行 if 块，否则执行 else 块。</span>
</span></span></span></code></pre><h3 id="https://www.notion.so/0cf9327d9ce04c4bb66f4a24dbd24555" class="ColorfulBlock ColorfulBlock--ColorDefault Heading Heading--3"><a class="Anchor" href="#https://www.notion.so/0cf9327d9ce04c4bb66f4a24dbd24555"><svg width="16" height="16" viewBox="0 0 16 16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a><span class="SemanticStringArray"><span class="SemanticString">小结</span></span></h3><ul class="BulletedListWrapper"><li id="https://www.notion.so/db09942e1aeb4adba10981a81d67c718" class="BulletedList"><span class="SemanticStringArray"><span class="SemanticString"><strong class="SemanticString__Fragment SemanticString__Fragment--Bold">for/else 和 while/else</strong></span><span class="SemanticString">：</span><span class="SemanticString"><code class="SemanticString__Fragment SemanticString__Fragment--Code">else</code></span><span class="SemanticString"> 块在循环正常结束时执行（没有被 </span><span class="SemanticString"><code class="SemanticString__Fragment SemanticString__Fragment--Code">break</code></span><span class="SemanticString"> 打断）。</span></span></li><li id="https://www.notion.so/b68d6fadf26545d9a11939fe585b8068" class="BulletedList"><span class="SemanticStringArray"><span class="SemanticString"><strong class="SemanticString__Fragment SemanticString__Fragment--Bold">try/else</strong></span><span class="SemanticString">：</span><span class="SemanticString"><code class="SemanticString__Fragment SemanticString__Fragment--Code">else</code></span><span class="SemanticString"> 块在 </span><span class="SemanticString"><code class="SemanticString__Fragment SemanticString__Fragment--Code">try</code></span><span class="SemanticString"> 块中没有异常时执行。</span></span></li><li id="https://www.notion.so/a3caafac096d41a1aeddab7790cbd320" class="BulletedList"><span class="SemanticStringArray"><span class="SemanticString"><strong class="SemanticString__Fragment SemanticString__Fragment--Bold">if/else</strong></span><span class="SemanticString">：</span><span class="SemanticString"><code class="SemanticString__Fragment SemanticString__Fragment--Code">else</code></span><span class="SemanticString"> 块在 </span><span class="SemanticString"><code class="SemanticString__Fragment SemanticString__Fragment--Code">if</code></span><span class="SemanticString"> 条件不满足时执行。</span></span></li></ul><div id="https://www.notion.so/58d690f515044a688bc28a56ed095ad4" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"><span class="SemanticString">这些结构中的 </span><span class="SemanticString"><code class="SemanticString__Fragment SemanticString__Fragment--Code">else</code></span><span class="SemanticString"> 子句都提供了一种在特定条件下执行额外代码的机制，但其触发条件和语义与 </span><span class="SemanticString"><code class="SemanticString__Fragment SemanticString__Fragment--Code">if/else</code></span><span class="SemanticString"> 条件判断结构有显著不同。</span></span></p></div><div id="https://www.notion.so/a28426b3509c47598f1faf2acb5faea8" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"></span></p></div><div id="https://www.notion.so/f40367dcecdf483b9d6e6c2a73646eb5" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"><span class="SemanticString">上下文管理器协议包含__enter__和__exit__两个方法。with语句开始运行时，会在上下文管理器对象上调用__enter__方法。with语句运行结束后，会在上下文管理器对象上调用__exit__方法，以此扮演finally子句的角色。</span></span></p></div><div id="https://www.notion.so/ed2075d1fc1a4071b11efcba701f786c" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"></span></p></div><div id="https://www.notion.so/28f28c87bb224466a02e9318e4d9c2f7" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"><span class="SemanticString">上下文管理器协议是 Python 中用于资源管理的一种协议，它包含两个方法：</span><span class="SemanticString"><code class="SemanticString__Fragment SemanticString__Fragment--Code">__enter__</code></span><span class="SemanticString"> 和 </span><span class="SemanticString"><code class="SemanticString__Fragment SemanticString__Fragment--Code">__exit__</code></span><span class="SemanticString">。实现了这些方法的对象可以在 </span><span class="SemanticString"><code class="SemanticString__Fragment SemanticString__Fragment--Code">with</code></span><span class="SemanticString"> 语句中使用，以确保资源在使用后能够正确地释放或清理。</span></span></p></div><h3 id="https://www.notion.so/46151db34e7a40bba774b5f0a1e2330d" class="ColorfulBlock ColorfulBlock--ColorDefault Heading Heading--3"><a class="Anchor" href="#https://www.notion.so/46151db34e7a40bba774b5f0a1e2330d"><svg width="16" height="16" viewBox="0 0 16 16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a><span class="SemanticStringArray"><span class="SemanticString"><code class="SemanticString__Fragment SemanticString__Fragment--Code">__enter__</code></span><span class="SemanticString"> 方法</span></span></h3><div id="https://www.notion.so/03aa18a6587242938f7a665f5cd16e9b" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"><span class="SemanticString"><code class="SemanticString__Fragment SemanticString__Fragment--Code">__enter__</code></span><span class="SemanticString"> 方法在进入 </span><span class="SemanticString"><code class="SemanticString__Fragment SemanticString__Fragment--Code">with</code></span><span class="SemanticString"> 语句块时执行。它的返回值会绑定到 </span><span class="SemanticString"><code class="SemanticString__Fragment SemanticString__Fragment--Code">as</code></span><span class="SemanticString"> 后的变量（如果存在）。</span></span></p></div><h3 id="https://www.notion.so/40d8ab736f97436494ac2d4b86da77ad" class="ColorfulBlock ColorfulBlock--ColorDefault Heading Heading--3"><a class="Anchor" href="#https://www.notion.so/40d8ab736f97436494ac2d4b86da77ad"><svg width="16" height="16" viewBox="0 0 16 16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a><span class="SemanticStringArray"><span class="SemanticString"><code class="SemanticString__Fragment SemanticString__Fragment--Code">__exit__</code></span><span class="SemanticString"> 方法</span></span></h3><div id="https://www.notion.so/a8a50dafdbca48ada27acbb4b82a3e4e" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"><span class="SemanticString"><code class="SemanticString__Fragment SemanticString__Fragment--Code">__exit__</code></span><span class="SemanticString"> 方法在退出 </span><span class="SemanticString"><code class="SemanticString__Fragment SemanticString__Fragment--Code">with</code></span><span class="SemanticString"> 语句块时执行。它接收三个参数，用于处理异常：</span></span></p></div><ol class="NumberedListWrapper"><li id="https://www.notion.so/78c4a1e8f7cc478f8c7540d4f3f2d989" class="NumberedList" value="1"><span class="SemanticStringArray"><span class="SemanticString"><code class="SemanticString__Fragment SemanticString__Fragment--Code">exc_type</code></span><span class="SemanticString">：异常类型（如果没有异常，则为 </span><span class="SemanticString"><code class="SemanticString__Fragment SemanticString__Fragment--Code">None</code></span><span class="SemanticString">）。</span></span></li><li id="https://www.notion.so/28d473b06f024255a1d2bb7ce9b799cb" class="NumberedList" value="2"><span class="SemanticStringArray"><span class="SemanticString"><code class="SemanticString__Fragment SemanticString__Fragment--Code">exc_value</code></span><span class="SemanticString">：异常实例（如果没有异常，则为 </span><span class="SemanticString"><code class="SemanticString__Fragment SemanticString__Fragment--Code">None</code></span><span class="SemanticString">）。</span></span></li><li id="https://www.notion.so/5b2b6c55aa004d30b021c19d4d106837" class="NumberedList" value="3"><span class="SemanticStringArray"><span class="SemanticString"><code class="SemanticString__Fragment SemanticString__Fragment--Code">traceback</code></span><span class="SemanticString">：异常的追踪信息（如果没有异常，则为 </span><span class="SemanticString"><code class="SemanticString__Fragment SemanticString__Fragment--Code">None</code></span><span class="SemanticString">）。</span></span></li></ol><div id="https://www.notion.so/15fe108464934721bc44ad0596fbf6f7" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"><span class="SemanticString">如果 </span><span class="SemanticString"><code class="SemanticString__Fragment SemanticString__Fragment--Code">__exit__</code></span><span class="SemanticString"> 方法返回 </span><span class="SemanticString"><code class="SemanticString__Fragment SemanticString__Fragment--Code">True</code></span><span class="SemanticString">，则异常会被抑制，不会继续传播；如果返回 </span><span class="SemanticString"><code class="SemanticString__Fragment SemanticString__Fragment--Code">False</code></span><span class="SemanticString"> 或没有返回值，则异常会被重新抛出。</span></span></p></div><h3 id="https://www.notion.so/c40e5a9921e34f23ae08a2cb97515113" class="ColorfulBlock ColorfulBlock--ColorDefault Heading Heading--3"><a class="Anchor" href="#https://www.notion.so/c40e5a9921e34f23ae08a2cb97515113"><svg width="16" height="16" viewBox="0 0 16 16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a><span class="SemanticStringArray"><span class="SemanticString">示例</span></span></h3><div id="https://www.notion.so/cd0ab8563b7f43bfbee8441a8ac99999" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"><span class="SemanticString">以下是一个简单的上下文管理器的示例，它实现了一个文件管理器，确保文件在操作完成后被正确关闭：</span></span></p></div><pre id="https://www.notion.so/dbb6312f87b94b618376125a10b427f5" class="Code"><code><span class="SemanticStringArray"><span class="SemanticString"><span><span class="token keyword">class</span> <span class="token class-name">FileManager</span><span class="token punctuation">:</span>
    <span class="token keyword">def</span> <span class="token function">__init__</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> filename<span class="token punctuation">,</span> mode<span class="token punctuation">)</span><span class="token punctuation">:</span>
        self<span class="token punctuation">.</span>filename <span class="token operator">=</span> filename
        self<span class="token punctuation">.</span>mode <span class="token operator">=</span> mode
        self<span class="token punctuation">.</span><span class="token builtin">file</span> <span class="token operator">=</span> <span class="token boolean">None</span>

    <span class="token keyword">def</span> <span class="token function">__enter__</span><span class="token punctuation">(</span>self<span class="token punctuation">)</span><span class="token punctuation">:</span>
        self<span class="token punctuation">.</span><span class="token builtin">file</span> <span class="token operator">=</span> <span class="token builtin">open</span><span class="token punctuation">(</span>self<span class="token punctuation">.</span>filename<span class="token punctuation">,</span> self<span class="token punctuation">.</span>mode<span class="token punctuation">)</span>
        <span class="token keyword">return</span> self<span class="token punctuation">.</span><span class="token builtin">file</span>

    <span class="token keyword">def</span> <span class="token function">__exit__</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> exc_type<span class="token punctuation">,</span> exc_value<span class="token punctuation">,</span> traceback<span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token keyword">if</span> self<span class="token punctuation">.</span><span class="token builtin">file</span><span class="token punctuation">:</span>
            self<span class="token punctuation">.</span><span class="token builtin">file</span><span class="token punctuation">.</span>close<span class="token punctuation">(</span><span class="token punctuation">)</span>
        <span class="token comment"># 如果没有异常发生，返回 True，否则返回 False 以重新抛出异常</span>
        <span class="token keyword">return</span> exc_type <span class="token keyword">is</span> <span class="token boolean">None</span>

<span class="token comment"># 使用 FileManager 上下文管理器</span>
<span class="token keyword">with</span> FileManager<span class="token punctuation">(</span><span class="token string">'test.txt'</span><span class="token punctuation">,</span> <span class="token string">'w'</span><span class="token punctuation">)</span> <span class="token keyword">as</span> f<span class="token punctuation">:</span>
    f<span class="token punctuation">.</span>write<span class="token punctuation">(</span><span class="token string">'Hello, world!'</span><span class="token punctuation">)</span>

<span class="token comment"># 这里文件已经被正确关闭，即使写入过程中发生异常也是如此</span>
</span></span></span></code></pre><h3 id="https://www.notion.so/ed6d507d86bd426caada1cd6d16ed05e" class="ColorfulBlock ColorfulBlock--ColorDefault Heading Heading--3"><a class="Anchor" href="#https://www.notion.so/ed6d507d86bd426caada1cd6d16ed05e"><svg width="16" height="16" viewBox="0 0 16 16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a><span class="SemanticStringArray"><span class="SemanticString">详细解释</span></span></h3><ol class="NumberedListWrapper"><li id="https://www.notion.so/3934fce2733245b2b8c39d0b0648a252" class="NumberedList" value="1"><span class="SemanticStringArray"><span class="SemanticString"><strong class="SemanticString__Fragment SemanticString__Fragment--Bold">初始化</strong></span><span class="SemanticString">：在 </span><span class="SemanticString"><code class="SemanticString__Fragment SemanticString__Fragment--Code">__init__</code></span><span class="SemanticString"> 方法中，我们接收文件名和模式并将其存储为实例变量。</span></span></li><li id="https://www.notion.so/1052bd7c34c6464fabe6c7d0810bfdcc" class="NumberedList" value="2"><span class="SemanticStringArray"><span class="SemanticString"><strong class="SemanticString__Fragment SemanticString__Fragment--Bold">进入上下文</strong></span><span class="SemanticString">：</span><span class="SemanticString"><code class="SemanticString__Fragment SemanticString__Fragment--Code">__enter__</code></span><span class="SemanticString"> 方法打开文件并返回文件对象。返回的文件对象会被绑定到 </span><span class="SemanticString"><code class="SemanticString__Fragment SemanticString__Fragment--Code">with</code></span><span class="SemanticString"> 语句中的 </span><span class="SemanticString"><code class="SemanticString__Fragment SemanticString__Fragment--Code">as</code></span><span class="SemanticString"> 后的变量 </span><span class="SemanticString"><code class="SemanticString__Fragment SemanticString__Fragment--Code">f</code></span><span class="SemanticString">。</span></span></li><li id="https://www.notion.so/151c51f28c014af1b79544004192cc77" class="NumberedList" value="3"><span class="SemanticStringArray"><span class="SemanticString"><strong class="SemanticString__Fragment SemanticString__Fragment--Bold">退出上下文</strong></span><span class="SemanticString">：</span><span class="SemanticString"><code class="SemanticString__Fragment SemanticString__Fragment--Code">__exit__</code></span><span class="SemanticString"> 方法关闭文件。如果 </span><span class="SemanticString"><code class="SemanticString__Fragment SemanticString__Fragment--Code">exc_type</code></span><span class="SemanticString"> 是 </span><span class="SemanticString"><code class="SemanticString__Fragment SemanticString__Fragment--Code">None</code></span><span class="SemanticString">（表示没有异常），则返回 </span><span class="SemanticString"><code class="SemanticString__Fragment SemanticString__Fragment--Code">True</code></span><span class="SemanticString">，否则返回 </span><span class="SemanticString"><code class="SemanticString__Fragment SemanticString__Fragment--Code">False</code></span><span class="SemanticString">。</span></span></li></ol><h3 id="https://www.notion.so/0825caebbf8c463da6091730102af263" class="ColorfulBlock ColorfulBlock--ColorDefault Heading Heading--3"><a class="Anchor" href="#https://www.notion.so/0825caebbf8c463da6091730102af263"><svg width="16" height="16" viewBox="0 0 16 16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a><span class="SemanticStringArray"><span class="SemanticString">处理异常</span></span></h3><div id="https://www.notion.so/1cbe5fe2a213499c988ea622fe0d0f4b" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"><span class="SemanticString">上下文管理器在处理异常时非常有用。即使在 </span><span class="SemanticString"><code class="SemanticString__Fragment SemanticString__Fragment--Code">with</code></span><span class="SemanticString"> 块内发生了异常，</span><span class="SemanticString"><code class="SemanticString__Fragment SemanticString__Fragment--Code">__exit__</code></span><span class="SemanticString"> 方法也会确保资源被正确地释放。</span></span></p></div><pre id="https://www.notion.so/0a79d086fbae41a48f9565943bc58c9d" class="Code"><code><span class="SemanticStringArray"><span class="SemanticString"><span><span class="token keyword">try</span><span class="token punctuation">:</span>
    <span class="token keyword">with</span> FileManager<span class="token punctuation">(</span><span class="token string">'test.txt'</span><span class="token punctuation">,</span> <span class="token string">'w'</span><span class="token punctuation">)</span> <span class="token keyword">as</span> f<span class="token punctuation">:</span>
        f<span class="token punctuation">.</span>write<span class="token punctuation">(</span><span class="token string">'Hello, world!'</span><span class="token punctuation">)</span>
        <span class="token keyword">raise</span> ValueError<span class="token punctuation">(</span><span class="token string">'An intentional error'</span><span class="token punctuation">)</span>  <span class="token comment"># 引发一个异常</span>
<span class="token keyword">except</span> ValueError <span class="token keyword">as</span> e<span class="token punctuation">:</span>
    <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string-interpolation"><span class="token string">f'Caught an exception: </span><span class="token interpolation"><span class="token punctuation">{</span>e<span class="token punctuation">}</span></span><span class="token string">'</span></span><span class="token punctuation">)</span>
</span></span></span></code></pre><div id="https://www.notion.so/3f15989333a24189b4e0e430de185650" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"><span class="SemanticString">在这个示例中，即使发生了 </span><span class="SemanticString"><code class="SemanticString__Fragment SemanticString__Fragment--Code">ValueError</code></span><span class="SemanticString"> 异常，</span><span class="SemanticString"><code class="SemanticString__Fragment SemanticString__Fragment--Code">FileManager</code></span><span class="SemanticString"> 上下文管理器的 </span><span class="SemanticString"><code class="SemanticString__Fragment SemanticString__Fragment--Code">__exit__</code></span><span class="SemanticString"> 方法仍会被调用，确保文件被正确关闭。</span></span></p></div><h3 id="https://www.notion.so/23ce505541d84cca945d63552c6d3eec" class="ColorfulBlock ColorfulBlock--ColorDefault Heading Heading--3"><a class="Anchor" href="#https://www.notion.so/23ce505541d84cca945d63552c6d3eec"><svg width="16" height="16" viewBox="0 0 16 16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a><span class="SemanticStringArray"><span class="SemanticString">小结</span></span></h3><ul class="BulletedListWrapper"><li id="https://www.notion.so/82b57ed09bad4c32b5aa51b3f4109a64" class="BulletedList"><span class="SemanticStringArray"><span class="SemanticString">上下文管理器协议包含 </span><span class="SemanticString"><code class="SemanticString__Fragment SemanticString__Fragment--Code">__enter__</code></span><span class="SemanticString"> 和 </span><span class="SemanticString"><code class="SemanticString__Fragment SemanticString__Fragment--Code">__exit__</code></span><span class="SemanticString"> 方法。</span></span></li><li id="https://www.notion.so/50c58424570249d3b4bbfcbc3016a120" class="BulletedList"><span class="SemanticStringArray"><span class="SemanticString"><code class="SemanticString__Fragment SemanticString__Fragment--Code">__enter__</code></span><span class="SemanticString"> 方法在进入 </span><span class="SemanticString"><code class="SemanticString__Fragment SemanticString__Fragment--Code">with</code></span><span class="SemanticString"> 语句块时执行，返回值绑定到 </span><span class="SemanticString"><code class="SemanticString__Fragment SemanticString__Fragment--Code">as</code></span><span class="SemanticString"> 后的变量。</span></span></li><li id="https://www.notion.so/0515074756c0491a93b152dd71781aee" class="BulletedList"><span class="SemanticStringArray"><span class="SemanticString"><code class="SemanticString__Fragment SemanticString__Fragment--Code">__exit__</code></span><span class="SemanticString"> 方法在退出 </span><span class="SemanticString"><code class="SemanticString__Fragment SemanticString__Fragment--Code">with</code></span><span class="SemanticString"> 语句块时执行，处理清理工作和异常。</span></span></li><li id="https://www.notion.so/9fd884c37d054bce85f0419557f91c1b" class="BulletedList"><span class="SemanticStringArray"><span class="SemanticString">上下文管理器在资源管理和异常处理方面非常有用，确保资源能够被正确释放。</span></span></li></ul><div id="https://www.notion.so/6fc9ba8684274d84a36f7c79b0e25c68" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"></span></p></div><div id="https://www.notion.so/7a31c72e2afd483980e153d77d82d370" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"></span></p></div><div id="https://www.notion.so/9df62436f6c44fbabc1be547801693ab" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"><span class="SemanticString"><code class="SemanticString__Fragment SemanticString__Fragment--Code">@contextmanager</code></span><span class="SemanticString"> 是 </span><span class="SemanticString"><code class="SemanticString__Fragment SemanticString__Fragment--Code">contextlib</code></span><span class="SemanticString"> 模块中的一个装饰器，用于简化上下文管理器的创建。使用这个装饰器，可以通过生成器函数来实现上下文管理器，而不需要定义一个包含 </span><span class="SemanticString"><code class="SemanticString__Fragment SemanticString__Fragment--Code">__enter__</code></span><span class="SemanticString"> 和 </span><span class="SemanticString"><code class="SemanticString__Fragment SemanticString__Fragment--Code">__exit__</code></span><span class="SemanticString"> 方法的类。</span></span></p></div><h3 id="https://www.notion.so/cc1332a7c80940d6a2be059fc0e0ae5c" class="ColorfulBlock ColorfulBlock--ColorDefault Heading Heading--3"><a class="Anchor" href="#https://www.notion.so/cc1332a7c80940d6a2be059fc0e0ae5c"><svg width="16" height="16" viewBox="0 0 16 16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a><span class="SemanticStringArray"><span class="SemanticString">示例</span></span></h3><div id="https://www.notion.so/3489c85320384bc5b32135ddbfd5191e" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"><span class="SemanticString">我们可以将之前的 </span><span class="SemanticString"><code class="SemanticString__Fragment SemanticString__Fragment--Code">LookingGlass</code></span><span class="SemanticString"> 类的功能使用 </span><span class="SemanticString"><code class="SemanticString__Fragment SemanticString__Fragment--Code">@contextmanager</code></span><span class="SemanticString"> 来实现。以下是一个示例，展示如何使用 </span><span class="SemanticString"><code class="SemanticString__Fragment SemanticString__Fragment--Code">@contextmanager</code></span><span class="SemanticString"> 创建一个上下文管理器来反转标准输出：</span></span></p></div><pre id="https://www.notion.so/7d78605126f14aa7ac56898c75f125a5" class="Code"><code><span class="SemanticStringArray"><span class="SemanticString"><span><span class="token keyword">from</span> contextlib <span class="token keyword">import</span> contextmanager
<span class="token keyword">import</span> sys

<span class="token decorator annotation punctuation">@contextmanager</span>
<span class="token keyword">def</span> <span class="token function">looking_glass</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
    original_write <span class="token operator">=</span> sys<span class="token punctuation">.</span>stdout<span class="token punctuation">.</span>write  <span class="token comment"># 保存原始的 sys.stdout.write 方法</span>

    <span class="token keyword">def</span> <span class="token function">reverse_write</span><span class="token punctuation">(</span>text<span class="token punctuation">)</span><span class="token punctuation">:</span>
        original_write<span class="token punctuation">(</span>text<span class="token punctuation">[</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">)</span>  <span class="token comment"># 自定义的写方法，反转文本并写入</span>

    sys<span class="token punctuation">.</span>stdout<span class="token punctuation">.</span>write <span class="token operator">=</span> reverse_write  <span class="token comment"># 替换 sys.stdout.write 方法为自定义的 reverse_write 方法</span>
    <span class="token keyword">try</span><span class="token punctuation">:</span>
        <span class="token keyword">yield</span> <span class="token string">'JABBERWOCKY'</span>  <span class="token comment"># 传递给 with 语句中的 as 后的变量</span>
    <span class="token keyword">except</span> ZeroDivisionError<span class="token punctuation">:</span>  <span class="token comment"># 捕获 ZeroDivisionError 异常</span>
        <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">'Please DO NOT divide by zero!'</span><span class="token punctuation">)</span>
    <span class="token keyword">finally</span><span class="token punctuation">:</span>
        sys<span class="token punctuation">.</span>stdout<span class="token punctuation">.</span>write <span class="token operator">=</span> original_write  <span class="token comment"># 恢复原始的 sys.stdout.write 方法</span>

<span class="token comment"># 使用 looking_glass 上下文管理器</span>
<span class="token keyword">with</span> looking_glass<span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">as</span> what<span class="token punctuation">:</span>
    <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">'Alice, Kitty and Snowdrop'</span><span class="token punctuation">)</span>
    <span class="token keyword">print</span><span class="token punctuation">(</span>what<span class="token punctuation">)</span>
</span></span></span></code></pre><h3 id="https://www.notion.so/06d31e5043204cb39a512813c5f61b29" class="ColorfulBlock ColorfulBlock--ColorDefault Heading Heading--3"><a class="Anchor" href="#https://www.notion.so/06d31e5043204cb39a512813c5f61b29"><svg width="16" height="16" viewBox="0 0 16 16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a><span class="SemanticStringArray"><span class="SemanticString">详细解释</span></span></h3><ol class="NumberedListWrapper"><li id="https://www.notion.so/a58aa083a7ef44ac98c74e7320123699" class="NumberedList" value="1"><span class="SemanticStringArray"><span class="SemanticString"><strong class="SemanticString__Fragment SemanticString__Fragment--Bold">导入 contextmanager</strong></span><span class="SemanticString">：</span></span><pre id="https://www.notion.so/ce342a658ec4434ca8e1ed56a9384248" class="Code"><code><span class="SemanticStringArray"><span class="SemanticString"><span><span class="token keyword">from</span> contextlib <span class="token keyword">import</span> contextmanager
</span></span></span></code></pre></li><li id="https://www.notion.so/81a7271895f64f72add6c06acb957b51" class="NumberedList" value="2"><span class="SemanticStringArray"><span class="SemanticString"><strong class="SemanticString__Fragment SemanticString__Fragment--Bold">定义生成器函数</strong></span><span class="SemanticString">：</span></span><pre id="https://www.notion.so/67d6ea0e58b94f138a0844412f38e7f3" class="Code"><code><span class="SemanticStringArray"><span class="SemanticString"><span><span class="token decorator annotation punctuation">@contextmanager</span>
<span class="token keyword">def</span> <span class="token function">looking_glass</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
    original_write <span class="token operator">=</span> sys<span class="token punctuation">.</span>stdout<span class="token punctuation">.</span>write
</span></span></span></code></pre></li><li id="https://www.notion.so/dc7a584afe0f417ea703c1243523b5c3" class="NumberedList" value="3"><span class="SemanticStringArray"><span class="SemanticString"><strong class="SemanticString__Fragment SemanticString__Fragment--Bold">定义反转写方法</strong></span><span class="SemanticString">：</span></span><pre id="https://www.notion.so/9df5e0ec4fea4f408225141fa36f2ba4" class="Code"><code><span class="SemanticStringArray"><span class="SemanticString"><span><span class="token keyword">def</span> <span class="token function">reverse_write</span><span class="token punctuation">(</span>text<span class="token punctuation">)</span><span class="token punctuation">:</span>
    original_write<span class="token punctuation">(</span>text<span class="token punctuation">[</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
</span></span></span></code></pre></li><li id="https://www.notion.so/f27894e6e04d42c78271b7185d2fe49d" class="NumberedList" value="4"><span class="SemanticStringArray"><span class="SemanticString"><strong class="SemanticString__Fragment SemanticString__Fragment--Bold">替换标准输出的写方法</strong></span><span class="SemanticString">：</span></span><pre id="https://www.notion.so/0f883534c985466ebe139049aa51aa78" class="Code"><code><span class="SemanticStringArray"><span class="SemanticString"><span>sys<span class="token punctuation">.</span>stdout<span class="token punctuation">.</span>write <span class="token operator">=</span> reverse_write
</span></span></span></code></pre></li><li id="https://www.notion.so/f3a0a6cfe8f24ec1bc439aefea08cf5d" class="NumberedList" value="5"><span class="SemanticStringArray"><span class="SemanticString"><strong class="SemanticString__Fragment SemanticString__Fragment--Bold">使用 </strong></span><span class="SemanticString"><code class="SemanticString__Fragment SemanticString__Fragment--Code"><strong class="SemanticString__Fragment SemanticString__Fragment--Bold">yield</strong></code></span><span class="SemanticString"><strong class="SemanticString__Fragment SemanticString__Fragment--Bold"> 语句</strong></span><span class="SemanticString">：</span></span><pre id="https://www.notion.so/94713f636a9941149c61025c34f68e5c" class="Code"><code><span class="SemanticStringArray"><span class="SemanticString"><span><span class="token keyword">yield</span> <span class="token string">'JABBERWOCKY'</span>
</span></span></span></code></pre><div id="https://www.notion.so/a34209cc66cb4d8980c4cc4507f36b80" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"><span class="SemanticString"><code class="SemanticString__Fragment SemanticString__Fragment--Code">yield</code></span><span class="SemanticString"> 语句的作用类似于 </span><span class="SemanticString"><code class="SemanticString__Fragment SemanticString__Fragment--Code">__enter__</code></span><span class="SemanticString"> 方法的返回值，它会传递给 </span><span class="SemanticString"><code class="SemanticString__Fragment SemanticString__Fragment--Code">with</code></span><span class="SemanticString"> 语句中的 </span><span class="SemanticString"><code class="SemanticString__Fragment SemanticString__Fragment--Code">as</code></span><span class="SemanticString"> 后的变量。</span></span></p></div></li><li id="https://www.notion.so/3e5516ae952044baa728ae6453d39345" class="NumberedList" value="6"><span class="SemanticStringArray"><span class="SemanticString"><strong class="SemanticString__Fragment SemanticString__Fragment--Bold">异常处理和资源恢复</strong></span><span class="SemanticString">：</span></span><pre id="https://www.notion.so/b2b118230c524959b303a9691a416f51" class="Code"><code><span class="SemanticStringArray"><span class="SemanticString"><span><span class="token keyword">except</span> ZeroDivisionError<span class="token punctuation">:</span>
    <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">'Please DO NOT divide by zero!'</span><span class="token punctuation">)</span>
<span class="token keyword">finally</span><span class="token punctuation">:</span>
    sys<span class="token punctuation">.</span>stdout<span class="token punctuation">.</span>write <span class="token operator">=</span> original_write
</span></span></span></code></pre></li></ol><h3 id="https://www.notion.so/97bdbb9e34744846a0ecae7d6b04e773" class="ColorfulBlock ColorfulBlock--ColorDefault Heading Heading--3"><a class="Anchor" href="#https://www.notion.so/97bdbb9e34744846a0ecae7d6b04e773"><svg width="16" height="16" viewBox="0 0 16 16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a><span class="SemanticStringArray"><span class="SemanticString">使用示例</span></span></h3><pre id="https://www.notion.so/a6832115831741eaabbea582474099f0" class="Code"><code><span class="SemanticStringArray"><span class="SemanticString"><span><span class="token keyword">with</span> looking_glass<span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">as</span> what<span class="token punctuation">:</span>
    <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">'Alice, Kitty and Snowdrop'</span><span class="token punctuation">)</span>
    <span class="token keyword">print</span><span class="token punctuation">(</span>what<span class="token punctuation">)</span>
</span></span></span></code></pre><h3 id="https://www.notion.so/7bf5aba5a7eb414fb91bcabeb4fce9a2" class="ColorfulBlock ColorfulBlock--ColorDefault Heading Heading--3"><a class="Anchor" href="#https://www.notion.so/7bf5aba5a7eb414fb91bcabeb4fce9a2"><svg width="16" height="16" viewBox="0 0 16 16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a><span class="SemanticStringArray"><span class="SemanticString">运行结果</span></span></h3><pre id="https://www.notion.so/cddf0d412b73489cb7b0efde50b6e34e" class="Code"><code><span class="SemanticStringArray"><span class="SemanticString"><span>pordwonS dna yttiK ,ecilA
YKCOWREBBUJ
</span></span></span></code></pre><h3 id="https://www.notion.so/4fad5907a85542aeb08109b4de7c7986" class="ColorfulBlock ColorfulBlock--ColorDefault Heading Heading--3"><a class="Anchor" href="#https://www.notion.so/4fad5907a85542aeb08109b4de7c7986"><svg width="16" height="16" viewBox="0 0 16 16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a><span class="SemanticStringArray"><span class="SemanticString">异常处理示例</span></span></h3><pre id="https://www.notion.so/135e6c5995f74de092e5be3d66db7816" class="Code"><code><span class="SemanticStringArray"><span class="SemanticString"><span><span class="token keyword">with</span> looking_glass<span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">as</span> what<span class="token punctuation">:</span>
    <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">'Hello, world!'</span><span class="token punctuation">)</span>
    <span class="token number">1</span> <span class="token operator">/</span> <span class="token number">0</span>  <span class="token comment"># 触发 ZeroDivisionError 异常</span>
</span></span></span></code></pre><h3 id="https://www.notion.so/7fb8f3f3fcce4c8e8bdfd09f3a8c464f" class="ColorfulBlock ColorfulBlock--ColorDefault Heading Heading--3"><a class="Anchor" href="#https://www.notion.so/7fb8f3f3fcce4c8e8bdfd09f3a8c464f"><svg width="16" height="16" viewBox="0 0 16 16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a><span class="SemanticStringArray"><span class="SemanticString">运行结果</span></span></h3><pre id="https://www.notion.so/11c236414b314f92a367d708e1a22d30" class="Code"><code><span class="SemanticStringArray"><span class="SemanticString"><span>!dlrow ,olleH
Please DO NOT divide by zero!
</span></span></span></code></pre><h3 id="https://www.notion.so/c8b5a903d0b54f6c848ce0c54914154f" class="ColorfulBlock ColorfulBlock--ColorDefault Heading Heading--3"><a class="Anchor" href="#https://www.notion.so/c8b5a903d0b54f6c848ce0c54914154f"><svg width="16" height="16" viewBox="0 0 16 16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a><span class="SemanticStringArray"><span class="SemanticString">小结</span></span></h3><ul class="BulletedListWrapper"><li id="https://www.notion.so/e5890d3a191344a29dcb9980ae5e397f" class="BulletedList"><span class="SemanticStringArray"><span class="SemanticString">使用 </span><span class="SemanticString"><code class="SemanticString__Fragment SemanticString__Fragment--Code">@contextmanager</code></span><span class="SemanticString"> 装饰器可以简化上下文管理器的创建，不需要显式定义 </span><span class="SemanticString"><code class="SemanticString__Fragment SemanticString__Fragment--Code">__enter__</code></span><span class="SemanticString"> 和 </span><span class="SemanticString"><code class="SemanticString__Fragment SemanticString__Fragment--Code">__exit__</code></span><span class="SemanticString"> 方法。</span></span></li><li id="https://www.notion.so/ab8d11ca8c6844b59da9b06db9f3b18f" class="BulletedList"><span class="SemanticStringArray"><span class="SemanticString"><code class="SemanticString__Fragment SemanticString__Fragment--Code">@contextmanager</code></span><span class="SemanticString"> 装饰的函数应该是一个生成器函数，使用 </span><span class="SemanticString"><code class="SemanticString__Fragment SemanticString__Fragment--Code">yield</code></span><span class="SemanticString"> 语句提供上下文资源。</span></span></li><li id="https://www.notion.so/57a64c92d0014532865a2c112025e0ce" class="BulletedList"><span class="SemanticStringArray"><span class="SemanticString"><code class="SemanticString__Fragment SemanticString__Fragment--Code">try</code></span><span class="SemanticString">、</span><span class="SemanticString"><code class="SemanticString__Fragment SemanticString__Fragment--Code">except</code></span><span class="SemanticString"> 和 </span><span class="SemanticString"><code class="SemanticString__Fragment SemanticString__Fragment--Code">finally</code></span><span class="SemanticString"> 块用于处理异常和资源清理。</span></span></li></ul><div id="https://www.notion.so/e83995cb73c048a7b06539fb2a27054d" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"></span></p></div><div id="https://www.notion.so/9397f1635620418f86d17e68c143e32e" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"><span class="SemanticString">在第1章我们就说过，在Python中创建功能完善的序列类型无需使用继承，只需实现符合序列协议的方法。不过，这里说的协议是什么呢？
在面向对象编程中，协议是非正式的接口，只在文档中定义，在代码中不定义。例如，Python的序列协议只需要__len__和__getitem__两个方法。任何类（如Spam），只要使用标准的签名和语义实现了这两个方法，就能用在任何期待序列的地方。Spam是不是哪个类的子类无关紧要，只要提供了所需的方法即可。示例1-1中见过一例，这里再次给出代码，</span></span></p></div><div id="https://www.notion.so/e2889f3060f347c481b46ab4a2b60629" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"></span></p></div><div id="https://www.notion.so/243c0b5dbc45406f8259f9a3cf66170f" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"></span></p></div><div id="https://www.notion.so/6cf067f2f33145a49e99a7dd8e0e2205" class="Image Image--PageWidth"><figure><a href="https://www.notion.so/signed/https%3A%2F%2Fprod-files-secure.s3.us-west-2.amazonaws.com%2F1c20d6dc-620b-4cb7-975f-a5c8ee0dd99a%2F2eca2505-4c88-4b62-aec3-c34d197c3641%2FUntitled.png?width=1200&amp;table=block&amp;id=6cf067f2-f331-45a4-9e99-a7dd8e0e2205"><img src="https://www.notion.so/signed/https%3A%2F%2Fprod-files-secure.s3.us-west-2.amazonaws.com%2F1c20d6dc-620b-4cb7-975f-a5c8ee0dd99a%2F2eca2505-4c88-4b62-aec3-c34d197c3641%2FUntitled.png?width=1200&amp;table=block&amp;id=6cf067f2-f331-45a4-9e99-a7dd8e0e2205" style="width:100%"/></a><figcaption><span class="SemanticStringArray"></span></figcaption></figure></div></article>
  <footer class="Footer">
  <div>&copy; ᐕ)⁾⁾ DoubleTree 2023</div>
  <div>&centerdot;</div>
  <div>Powered by <a href="https://github.com/dragonman225/notablog" target="_blank"
      rel="noopener noreferrer">Notablog</a>.
  </div>
</footer>
</body>

</html>